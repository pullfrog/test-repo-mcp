#!/usr/bin/env node
var Mf=Object.create;var yn=Object.defineProperty;var Lf=Object.getOwnPropertyDescriptor;var Uf=Object.getOwnPropertyNames;var Ff=Object.getPrototypeOf,Vf=Object.prototype.hasOwnProperty;var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),wa=(e,t)=>{for(var r in t)yn(e,r,{get:t[r],enumerable:!0})},Hf=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Uf(t))!Vf.call(e,n)&&n!==r&&yn(e,n,{get:()=>t[n],enumerable:!(o=Lf(t,n))||o.enumerable});return e};var ka=(e,t,r)=>(r=e!=null?Mf(Ff(e)):{},Hf(t||!e||!e.__esModule?yn(r,"default",{value:e,enumerable:!0}):r,e));var br=b(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.regexpCode=D.getEsmExportName=D.getProperty=D.safeStringify=D.stringify=D.strConcat=D.addCodeArg=D.str=D._=D.nil=D._Code=D.Name=D.IDENTIFIER=D._CodeOrName=void 0;var vr=class{};D._CodeOrName=vr;D.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var mt=class extends vr{constructor(t){if(super(),!D.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};D.Name=mt;var Ee=class extends vr{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,o)=>`${r}${o}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,o)=>(o instanceof mt&&(r[o.str]=(r[o.str]||0)+1),r),{})}};D._Code=Ee;D.nil=new Ee("");function Bl(e,...t){let r=[e[0]],o=0;for(;o<t.length;)Is(r,t[o]),r.push(e[++o]);return new Ee(r)}D._=Bl;var Ts=new Ee("+");function Gl(e,...t){let r=[$r(e[0])],o=0;for(;o<t.length;)r.push(Ts),Is(r,t[o]),r.push(Ts,$r(e[++o]));return Xg(r),new Ee(r)}D.str=Gl;function Is(e,t){t instanceof Ee?e.push(...t._items):t instanceof mt?e.push(t):e.push(r_(t))}D.addCodeArg=Is;function Xg(e){let t=1;for(;t<e.length-1;){if(e[t]===Ts){let r=e_(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function e_(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof mt||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof mt))return`"${e}${t.slice(1)}`}function t_(e,t){return t.emptyStr()?e:e.emptyStr()?t:Gl`${e}${t}`}D.strConcat=t_;function r_(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:$r(Array.isArray(e)?e.join(","):e)}function o_(e){return new Ee($r(e))}D.stringify=o_;function $r(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}D.safeStringify=$r;function n_(e){return typeof e=="string"&&D.IDENTIFIER.test(e)?new Ee(`.${e}`):Bl`[${e}]`}D.getProperty=n_;function s_(e){if(typeof e=="string"&&D.IDENTIFIER.test(e))return new Ee(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}D.getEsmExportName=s_;function i_(e){return new Ee(e.toString())}D.regexpCode=i_});var Os=b($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.ValueScope=$e.ValueScopeName=$e.Scope=$e.varKinds=$e.UsedValueState=void 0;var ve=br(),Rs=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},Eo;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(Eo||($e.UsedValueState=Eo={}));$e.varKinds={const:new ve.Name("const"),let:new ve.Name("let"),var:new ve.Name("var")};var To=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof ve.Name?t:this.name(t)}name(t){return new ve.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,o;if(!((o=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||o===void 0)&&o.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};$e.Scope=To;var Io=class extends ve.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:o}){this.value=t,this.scopePath=(0,ve._)`.${new ve.Name(r)}[${o}]`}};$e.ValueScopeName=Io;var a_=(0,ve._)`\n`,Ns=class extends To{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?a_:ve.nil}}get(){return this._scope}name(t){return new Io(t,this._newName(t))}value(t,r){var o;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let n=this.toName(t),{prefix:s}=n,i=(o=r.key)!==null&&o!==void 0?o:r.ref,a=this._values[s];if(a){let l=a.get(i);if(l)return l}else a=this._values[s]=new Map;a.set(i,n);let c=this._scope[s]||(this._scope[s]=[]),u=c.length;return c[u]=r.ref,n.setValue(r,{property:s,itemIndex:u}),n}getValue(t,r){let o=this._values[t];if(o)return o.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,o=>{if(o.scopePath===void 0)throw new Error(`CodeGen: name "${o}" has no value`);return(0,ve._)`${t}${o.scopePath}`})}scopeCode(t=this._values,r,o){return this._reduceValues(t,n=>{if(n.value===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return n.value.code},r,o)}_reduceValues(t,r,o={},n){let s=ve.nil;for(let i in t){let a=t[i];if(!a)continue;let c=o[i]=o[i]||new Map;a.forEach(u=>{if(c.has(u))return;c.set(u,Eo.Started);let l=r(u);if(l){let d=this.opts.es5?$e.varKinds.var:$e.varKinds.const;s=(0,ve._)`${s}${d} ${u} = ${l};${this.opts._n}`}else if(l=n?.(u))s=(0,ve._)`${s}${l}${this.opts._n}`;else throw new Rs(u);c.set(u,Eo.Completed)})}return s}};$e.ValueScope=Ns});var N=b(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.or=O.and=O.not=O.CodeGen=O.operators=O.varKinds=O.ValueScopeName=O.ValueScope=O.Scope=O.Name=O.regexpCode=O.stringify=O.getProperty=O.nil=O.strConcat=O.str=O._=void 0;var A=br(),Oe=Os(),ot=br();Object.defineProperty(O,"_",{enumerable:!0,get:function(){return ot._}});Object.defineProperty(O,"str",{enumerable:!0,get:function(){return ot.str}});Object.defineProperty(O,"strConcat",{enumerable:!0,get:function(){return ot.strConcat}});Object.defineProperty(O,"nil",{enumerable:!0,get:function(){return ot.nil}});Object.defineProperty(O,"getProperty",{enumerable:!0,get:function(){return ot.getProperty}});Object.defineProperty(O,"stringify",{enumerable:!0,get:function(){return ot.stringify}});Object.defineProperty(O,"regexpCode",{enumerable:!0,get:function(){return ot.regexpCode}});Object.defineProperty(O,"Name",{enumerable:!0,get:function(){return ot.Name}});var jo=Os();Object.defineProperty(O,"Scope",{enumerable:!0,get:function(){return jo.Scope}});Object.defineProperty(O,"ValueScope",{enumerable:!0,get:function(){return jo.ValueScope}});Object.defineProperty(O,"ValueScopeName",{enumerable:!0,get:function(){return jo.ValueScopeName}});Object.defineProperty(O,"varKinds",{enumerable:!0,get:function(){return jo.varKinds}});O.operators={GT:new A._Code(">"),GTE:new A._Code(">="),LT:new A._Code("<"),LTE:new A._Code("<="),EQ:new A._Code("==="),NEQ:new A._Code("!=="),NOT:new A._Code("!"),OR:new A._Code("||"),AND:new A._Code("&&"),ADD:new A._Code("+")};var Ge=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},js=class extends Ge{constructor(t,r,o){super(),this.varKind=t,this.name=r,this.rhs=o}render({es5:t,_n:r}){let o=t?Oe.varKinds.var:this.varKind,n=this.rhs===void 0?"":` = ${this.rhs}`;return`${o} ${this.name}${n};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=Ot(this.rhs,t,r)),this}get names(){return this.rhs instanceof A._CodeOrName?this.rhs.names:{}}},Ro=class extends Ge{constructor(t,r,o){super(),this.lhs=t,this.rhs=r,this.sideEffects=o}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof A.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=Ot(this.rhs,t,r),this}get names(){let t=this.lhs instanceof A.Name?{}:{...this.lhs.names};return Oo(t,this.rhs)}},Zs=class extends Ro{constructor(t,r,o,n){super(t,o,n),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},Cs=class extends Ge{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},As=class extends Ge{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},qs=class extends Ge{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},Ds=class extends Ge{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=Ot(this.code,t,r),this}get names(){return this.code instanceof A._CodeOrName?this.code.names:{}}},zr=class extends Ge{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,o)=>r+o.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let o=t[r].optimizeNodes();Array.isArray(o)?t.splice(r,1,...o):o?t[r]=o:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:o}=this,n=o.length;for(;n--;){let s=o[n];s.optimizeNames(t,r)||(c_(t,s.names),o.splice(n,1))}return o.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>_t(t,r.names),{})}},Je=class extends zr{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},Ms=class extends zr{},Nt=class extends Je{};Nt.kind="else";var ht=class e extends Je{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let o=r.optimizeNodes();r=this.else=Array.isArray(o)?new Nt(o):o}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(Jl(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var o;if(this.else=(o=this.else)===null||o===void 0?void 0:o.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=Ot(this.condition,t,r),this}get names(){let t=super.names;return Oo(t,this.condition),this.else&&_t(t,this.else.names),t}};ht.kind="if";var gt=class extends Je{};gt.kind="for";var Ls=class extends gt{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=Ot(this.iteration,t,r),this}get names(){return _t(super.names,this.iteration.names)}},Us=class extends gt{constructor(t,r,o,n){super(),this.varKind=t,this.name=r,this.from=o,this.to=n}render(t){let r=t.es5?Oe.varKinds.var:this.varKind,{name:o,from:n,to:s}=this;return`for(${r} ${o}=${n}; ${o}<${s}; ${o}++)`+super.render(t)}get names(){let t=Oo(super.names,this.from);return Oo(t,this.to)}},No=class extends gt{constructor(t,r,o,n){super(),this.loop=t,this.varKind=r,this.name=o,this.iterable=n}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=Ot(this.iterable,t,r),this}get names(){return _t(super.names,this.iterable.names)}},xr=class extends Je{constructor(t,r,o){super(),this.name=t,this.args=r,this.async=o}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};xr.kind="func";var wr=class extends zr{render(t){return"return "+super.render(t)}};wr.kind="return";var Fs=class extends Je{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var o,n;return super.optimizeNames(t,r),(o=this.catch)===null||o===void 0||o.optimizeNames(t,r),(n=this.finally)===null||n===void 0||n.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&_t(t,this.catch.names),this.finally&&_t(t,this.finally.names),t}},kr=class extends Je{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};kr.kind="catch";var Sr=class extends Je{render(t){return"finally"+super.render(t)}};Sr.kind="finally";var Vs=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new Oe.Scope({parent:t}),this._nodes=[new Ms]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let o=this._extScope.value(t,r);return(this._values[o.prefix]||(this._values[o.prefix]=new Set)).add(o),o}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,o,n){let s=this._scope.toName(r);return o!==void 0&&n&&(this._constants[s.str]=o),this._leafNode(new js(t,s,o)),s}const(t,r,o){return this._def(Oe.varKinds.const,t,r,o)}let(t,r,o){return this._def(Oe.varKinds.let,t,r,o)}var(t,r,o){return this._def(Oe.varKinds.var,t,r,o)}assign(t,r,o){return this._leafNode(new Ro(t,r,o))}add(t,r){return this._leafNode(new Zs(t,O.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==A.nil&&this._leafNode(new Ds(t)),this}object(...t){let r=["{"];for(let[o,n]of t)r.length>1&&r.push(","),r.push(o),(o!==n||this.opts.es5)&&(r.push(":"),(0,A.addCodeArg)(r,n));return r.push("}"),new A._Code(r)}if(t,r,o){if(this._blockNode(new ht(t)),r&&o)this.code(r).else().code(o).endIf();else if(r)this.code(r).endIf();else if(o)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new ht(t))}else(){return this._elseNode(new Nt)}endIf(){return this._endBlockNode(ht,Nt)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new Ls(t),r)}forRange(t,r,o,n,s=this.opts.es5?Oe.varKinds.var:Oe.varKinds.let){let i=this._scope.toName(t);return this._for(new Us(s,i,r,o),()=>n(i))}forOf(t,r,o,n=Oe.varKinds.const){let s=this._scope.toName(t);if(this.opts.es5){let i=r instanceof A.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,A._)`${i}.length`,a=>{this.var(s,(0,A._)`${i}[${a}]`),o(s)})}return this._for(new No("of",n,s,r),()=>o(s))}forIn(t,r,o,n=this.opts.es5?Oe.varKinds.var:Oe.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,A._)`Object.keys(${r})`,o);let s=this._scope.toName(t);return this._for(new No("in",n,s,r),()=>o(s))}endFor(){return this._endBlockNode(gt)}label(t){return this._leafNode(new Cs(t))}break(t){return this._leafNode(new As(t))}return(t){let r=new wr;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(wr)}try(t,r,o){if(!r&&!o)throw new Error('CodeGen: "try" without "catch" and "finally"');let n=new Fs;if(this._blockNode(n),this.code(t),r){let s=this.name("e");this._currNode=n.catch=new kr(s),r(s)}return o&&(this._currNode=n.finally=new Sr,this.code(o)),this._endBlockNode(kr,Sr)}throw(t){return this._leafNode(new qs(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let o=this._nodes.length-r;if(o<0||t!==void 0&&o!==t)throw new Error(`CodeGen: wrong number of nodes: ${o} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=A.nil,o,n){return this._blockNode(new xr(t,r,o)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(xr)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let o=this._currNode;if(o instanceof t||r&&o instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof ht))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};O.CodeGen=Vs;function _t(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function Oo(e,t){return t instanceof A._CodeOrName?_t(e,t.names):e}function Ot(e,t,r){if(e instanceof A.Name)return o(e);if(!n(e))return e;return new A._Code(e._items.reduce((s,i)=>(i instanceof A.Name&&(i=o(i)),i instanceof A._Code?s.push(...i._items):s.push(i),s),[]));function o(s){let i=r[s.str];return i===void 0||t[s.str]!==1?s:(delete t[s.str],i)}function n(s){return s instanceof A._Code&&s._items.some(i=>i instanceof A.Name&&t[i.str]===1&&r[i.str]!==void 0)}}function c_(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function Jl(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,A._)`!${Hs(e)}`}O.not=Jl;var u_=Wl(O.operators.AND);function l_(...e){return e.reduce(u_)}O.and=l_;var d_=Wl(O.operators.OR);function p_(...e){return e.reduce(d_)}O.or=p_;function Wl(e){return(t,r)=>t===A.nil?r:r===A.nil?t:(0,A._)`${Hs(t)} ${e} ${Hs(r)}`}function Hs(e){return e instanceof A.Name?e:(0,A._)`(${e})`}});var M=b(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.checkStrictMode=j.getErrorPath=j.Type=j.useFunc=j.setEvaluated=j.evaluatedPropsToName=j.mergeEvaluated=j.eachItem=j.unescapeJsonPointer=j.escapeJsonPointer=j.escapeFragment=j.unescapeFragment=j.schemaRefOrVal=j.schemaHasRulesButRef=j.schemaHasRules=j.checkUnknownRules=j.alwaysValidSchema=j.toHash=void 0;var V=N(),f_=br();function m_(e){let t={};for(let r of e)t[r]=!0;return t}j.toHash=m_;function h_(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Xl(e,t),!ed(t,e.self.RULES.all))}j.alwaysValidSchema=h_;function Xl(e,t=e.schema){let{opts:r,self:o}=e;if(!r.strictSchema||typeof t=="boolean")return;let n=o.RULES.keywords;for(let s in t)n[s]||od(e,`unknown keyword: "${s}"`)}j.checkUnknownRules=Xl;function ed(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}j.schemaHasRules=ed;function g_(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}j.schemaHasRulesButRef=g_;function __({topSchemaRef:e,schemaPath:t},r,o,n){if(!n){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,V._)`${r}`}return(0,V._)`${e}${t}${(0,V.getProperty)(o)}`}j.schemaRefOrVal=__;function y_(e){return td(decodeURIComponent(e))}j.unescapeFragment=y_;function v_(e){return encodeURIComponent(Bs(e))}j.escapeFragment=v_;function Bs(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}j.escapeJsonPointer=Bs;function td(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}j.unescapeJsonPointer=td;function $_(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}j.eachItem=$_;function Yl({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:o}){return(n,s,i,a)=>{let c=i===void 0?s:i instanceof V.Name?(s instanceof V.Name?e(n,s,i):t(n,s,i),i):s instanceof V.Name?(t(n,i,s),s):r(s,i);return a===V.Name&&!(c instanceof V.Name)?o(n,c):c}}j.mergeEvaluated={props:Yl({mergeNames:(e,t,r)=>e.if((0,V._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,V._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,V._)`${r} || {}`).code((0,V._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,V._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,V._)`${r} || {}`),Gs(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:rd}),items:Yl({mergeNames:(e,t,r)=>e.if((0,V._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,V._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,V._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,V._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function rd(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,V._)`{}`);return t!==void 0&&Gs(e,r,t),r}j.evaluatedPropsToName=rd;function Gs(e,t,r){Object.keys(r).forEach(o=>e.assign((0,V._)`${t}${(0,V.getProperty)(o)}`,!0))}j.setEvaluated=Gs;var Ql={};function b_(e,t){return e.scopeValue("func",{ref:t,code:Ql[t.code]||(Ql[t.code]=new f_._Code(t.code))})}j.useFunc=b_;var Ks;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Ks||(j.Type=Ks={}));function z_(e,t,r){if(e instanceof V.Name){let o=t===Ks.Num;return r?o?(0,V._)`"[" + ${e} + "]"`:(0,V._)`"['" + ${e} + "']"`:o?(0,V._)`"/" + ${e}`:(0,V._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,V.getProperty)(e).toString():"/"+Bs(e)}j.getErrorPath=z_;function od(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}j.checkStrictMode=od});var We=b(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var de=N(),x_={data:new de.Name("data"),valCxt:new de.Name("valCxt"),instancePath:new de.Name("instancePath"),parentData:new de.Name("parentData"),parentDataProperty:new de.Name("parentDataProperty"),rootData:new de.Name("rootData"),dynamicAnchors:new de.Name("dynamicAnchors"),vErrors:new de.Name("vErrors"),errors:new de.Name("errors"),this:new de.Name("this"),self:new de.Name("self"),scope:new de.Name("scope"),json:new de.Name("json"),jsonPos:new de.Name("jsonPos"),jsonLen:new de.Name("jsonLen"),jsonPart:new de.Name("jsonPart")};Js.default=x_});var Pr=b(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.extendErrors=pe.resetErrorsCount=pe.reportExtraError=pe.reportError=pe.keyword$DataError=pe.keywordError=void 0;var q=N(),Zo=M(),ge=We();pe.keywordError={message:({keyword:e})=>(0,q.str)`must pass "${e}" keyword validation`};pe.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,q.str)`"${e}" keyword must be ${t} ($data)`:(0,q.str)`"${e}" keyword is invalid ($data)`};function w_(e,t=pe.keywordError,r,o){let{it:n}=e,{gen:s,compositeRule:i,allErrors:a}=n,c=id(e,t,r);o??(i||a)?nd(s,c):sd(n,(0,q._)`[${c}]`)}pe.reportError=w_;function k_(e,t=pe.keywordError,r){let{it:o}=e,{gen:n,compositeRule:s,allErrors:i}=o,a=id(e,t,r);nd(n,a),s||i||sd(o,ge.default.vErrors)}pe.reportExtraError=k_;function S_(e,t){e.assign(ge.default.errors,t),e.if((0,q._)`${ge.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,q._)`${ge.default.vErrors}.length`,t),()=>e.assign(ge.default.vErrors,null)))}pe.resetErrorsCount=S_;function P_({gen:e,keyword:t,schemaValue:r,data:o,errsCount:n,it:s}){if(n===void 0)throw new Error("ajv implementation error");let i=e.name("err");e.forRange("i",n,ge.default.errors,a=>{e.const(i,(0,q._)`${ge.default.vErrors}[${a}]`),e.if((0,q._)`${i}.instancePath === undefined`,()=>e.assign((0,q._)`${i}.instancePath`,(0,q.strConcat)(ge.default.instancePath,s.errorPath))),e.assign((0,q._)`${i}.schemaPath`,(0,q.str)`${s.errSchemaPath}/${t}`),s.opts.verbose&&(e.assign((0,q._)`${i}.schema`,r),e.assign((0,q._)`${i}.data`,o))})}pe.extendErrors=P_;function nd(e,t){let r=e.const("err",t);e.if((0,q._)`${ge.default.vErrors} === null`,()=>e.assign(ge.default.vErrors,(0,q._)`[${r}]`),(0,q._)`${ge.default.vErrors}.push(${r})`),e.code((0,q._)`${ge.default.errors}++`)}function sd(e,t){let{gen:r,validateName:o,schemaEnv:n}=e;n.$async?r.throw((0,q._)`new ${e.ValidationError}(${t})`):(r.assign((0,q._)`${o}.errors`,t),r.return(!1))}var yt={keyword:new q.Name("keyword"),schemaPath:new q.Name("schemaPath"),params:new q.Name("params"),propertyName:new q.Name("propertyName"),message:new q.Name("message"),schema:new q.Name("schema"),parentSchema:new q.Name("parentSchema")};function id(e,t,r){let{createErrors:o}=e.it;return o===!1?(0,q._)`{}`:E_(e,t,r)}function E_(e,t,r={}){let{gen:o,it:n}=e,s=[T_(n,r),I_(e,r)];return R_(e,t,s),o.object(...s)}function T_({errorPath:e},{instancePath:t}){let r=t?(0,q.str)`${e}${(0,Zo.getErrorPath)(t,Zo.Type.Str)}`:e;return[ge.default.instancePath,(0,q.strConcat)(ge.default.instancePath,r)]}function I_({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:o}){let n=o?t:(0,q.str)`${t}/${e}`;return r&&(n=(0,q.str)`${n}${(0,Zo.getErrorPath)(r,Zo.Type.Str)}`),[yt.schemaPath,n]}function R_(e,{params:t,message:r},o){let{keyword:n,data:s,schemaValue:i,it:a}=e,{opts:c,propertyName:u,topSchemaRef:l,schemaPath:d}=a;o.push([yt.keyword,n],[yt.params,typeof t=="function"?t(e):t||(0,q._)`{}`]),c.messages&&o.push([yt.message,typeof r=="function"?r(e):r]),c.verbose&&o.push([yt.schema,i],[yt.parentSchema,(0,q._)`${l}${d}`],[ge.default.data,s]),u&&o.push([yt.propertyName,u])}});var cd=b(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.boolOrEmptySchema=jt.topBoolOrEmptySchema=void 0;var N_=Pr(),O_=N(),j_=We(),Z_={message:"boolean schema is false"};function C_(e){let{gen:t,schema:r,validateName:o}=e;r===!1?ad(e,!1):typeof r=="object"&&r.$async===!0?t.return(j_.default.data):(t.assign((0,O_._)`${o}.errors`,null),t.return(!0))}jt.topBoolOrEmptySchema=C_;function A_(e,t){let{gen:r,schema:o}=e;o===!1?(r.var(t,!1),ad(e)):r.var(t,!0)}jt.boolOrEmptySchema=A_;function ad(e,t){let{gen:r,data:o}=e,n={gen:r,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,N_.reportError)(n,Z_,void 0,t)}});var Ws=b(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.getRules=Zt.isJSONType=void 0;var q_=["string","number","integer","boolean","null","object","array"],D_=new Set(q_);function M_(e){return typeof e=="string"&&D_.has(e)}Zt.isJSONType=M_;function L_(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Zt.getRules=L_});var Ys=b(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.shouldUseRule=nt.shouldUseGroup=nt.schemaHasRulesForType=void 0;function U_({schema:e,self:t},r){let o=t.RULES.types[r];return o&&o!==!0&&ud(e,o)}nt.schemaHasRulesForType=U_;function ud(e,t){return t.rules.some(r=>ld(e,r))}nt.shouldUseGroup=ud;function ld(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(o=>e[o]!==void 0))}nt.shouldUseRule=ld});var Er=b(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.reportTypeError=fe.checkDataTypes=fe.checkDataType=fe.coerceAndCheckDataType=fe.getJSONTypes=fe.getSchemaTypes=fe.DataType=void 0;var F_=Ws(),V_=Ys(),H_=Pr(),I=N(),dd=M(),Ct;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Ct||(fe.DataType=Ct={}));function K_(e){let t=pd(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}fe.getSchemaTypes=K_;function pd(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(F_.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}fe.getJSONTypes=pd;function B_(e,t){let{gen:r,data:o,opts:n}=e,s=G_(t,n.coerceTypes),i=t.length>0&&!(s.length===0&&t.length===1&&(0,V_.schemaHasRulesForType)(e,t[0]));if(i){let a=Xs(t,o,n.strictNumbers,Ct.Wrong);r.if(a,()=>{s.length?J_(e,t,s):ei(e)})}return i}fe.coerceAndCheckDataType=B_;var fd=new Set(["string","number","integer","boolean","null"]);function G_(e,t){return t?e.filter(r=>fd.has(r)||t==="array"&&r==="array"):[]}function J_(e,t,r){let{gen:o,data:n,opts:s}=e,i=o.let("dataType",(0,I._)`typeof ${n}`),a=o.let("coerced",(0,I._)`undefined`);s.coerceTypes==="array"&&o.if((0,I._)`${i} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>o.assign(n,(0,I._)`${n}[0]`).assign(i,(0,I._)`typeof ${n}`).if(Xs(t,n,s.strictNumbers),()=>o.assign(a,n))),o.if((0,I._)`${a} !== undefined`);for(let u of r)(fd.has(u)||u==="array"&&s.coerceTypes==="array")&&c(u);o.else(),ei(e),o.endIf(),o.if((0,I._)`${a} !== undefined`,()=>{o.assign(n,a),W_(e,a)});function c(u){switch(u){case"string":o.elseIf((0,I._)`${i} == "number" || ${i} == "boolean"`).assign(a,(0,I._)`"" + ${n}`).elseIf((0,I._)`${n} === null`).assign(a,(0,I._)`""`);return;case"number":o.elseIf((0,I._)`${i} == "boolean" || ${n} === null
              || (${i} == "string" && ${n} && ${n} == +${n})`).assign(a,(0,I._)`+${n}`);return;case"integer":o.elseIf((0,I._)`${i} === "boolean" || ${n} === null
              || (${i} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(a,(0,I._)`+${n}`);return;case"boolean":o.elseIf((0,I._)`${n} === "false" || ${n} === 0 || ${n} === null`).assign(a,!1).elseIf((0,I._)`${n} === "true" || ${n} === 1`).assign(a,!0);return;case"null":o.elseIf((0,I._)`${n} === "" || ${n} === 0 || ${n} === false`),o.assign(a,null);return;case"array":o.elseIf((0,I._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${n} === null`).assign(a,(0,I._)`[${n}]`)}}}function W_({gen:e,parentData:t,parentDataProperty:r},o){e.if((0,I._)`${t} !== undefined`,()=>e.assign((0,I._)`${t}[${r}]`,o))}function Qs(e,t,r,o=Ct.Correct){let n=o===Ct.Correct?I.operators.EQ:I.operators.NEQ,s;switch(e){case"null":return(0,I._)`${t} ${n} null`;case"array":s=(0,I._)`Array.isArray(${t})`;break;case"object":s=(0,I._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=i((0,I._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=i();break;default:return(0,I._)`typeof ${t} ${n} ${e}`}return o===Ct.Correct?s:(0,I.not)(s);function i(a=I.nil){return(0,I.and)((0,I._)`typeof ${t} == "number"`,a,r?(0,I._)`isFinite(${t})`:I.nil)}}fe.checkDataType=Qs;function Xs(e,t,r,o){if(e.length===1)return Qs(e[0],t,r,o);let n,s=(0,dd.toHash)(e);if(s.array&&s.object){let i=(0,I._)`typeof ${t} != "object"`;n=s.null?i:(0,I._)`!${t} || ${i}`,delete s.null,delete s.array,delete s.object}else n=I.nil;s.number&&delete s.integer;for(let i in s)n=(0,I.and)(n,Qs(i,t,r,o));return n}fe.checkDataTypes=Xs;var Y_={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,I._)`{type: ${e}}`:(0,I._)`{type: ${t}}`};function ei(e){let t=Q_(e);(0,H_.reportError)(t,Y_)}fe.reportTypeError=ei;function Q_(e){let{gen:t,data:r,schema:o}=e,n=(0,dd.schemaRefOrVal)(e,o,"type");return{gen:t,keyword:"type",data:r,schema:o.type,schemaCode:n,schemaValue:n,parentSchema:o,params:{},it:e}}});var hd=b(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.assignDefaults=void 0;var At=N(),X_=M();function ey(e,t){let{properties:r,items:o}=e.schema;if(t==="object"&&r)for(let n in r)md(e,n,r[n].default);else t==="array"&&Array.isArray(o)&&o.forEach((n,s)=>md(e,s,n.default))}Co.assignDefaults=ey;function md(e,t,r){let{gen:o,compositeRule:n,data:s,opts:i}=e;if(r===void 0)return;let a=(0,At._)`${s}${(0,At.getProperty)(t)}`;if(n){(0,X_.checkStrictMode)(e,`default is ignored for: ${a}`);return}let c=(0,At._)`${a} === undefined`;i.useDefaults==="empty"&&(c=(0,At._)`${c} || ${a} === null || ${a} === ""`),o.if(c,(0,At._)`${a} = ${(0,At.stringify)(r)}`)}});var Te=b(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.validateUnion=F.validateArray=F.usePattern=F.callValidateCode=F.schemaProperties=F.allSchemaProperties=F.noPropertyInData=F.propertyInData=F.isOwnProperty=F.hasPropFunc=F.reportMissingProp=F.checkMissingProp=F.checkReportMissingProp=void 0;var J=N(),ti=M(),st=We(),ty=M();function ry(e,t){let{gen:r,data:o,it:n}=e;r.if(oi(r,o,t,n.opts.ownProperties),()=>{e.setParams({missingProperty:(0,J._)`${t}`},!0),e.error()})}F.checkReportMissingProp=ry;function oy({gen:e,data:t,it:{opts:r}},o,n){return(0,J.or)(...o.map(s=>(0,J.and)(oi(e,t,s,r.ownProperties),(0,J._)`${n} = ${s}`)))}F.checkMissingProp=oy;function ny(e,t){e.setParams({missingProperty:t},!0),e.error()}F.reportMissingProp=ny;function gd(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,J._)`Object.prototype.hasOwnProperty`})}F.hasPropFunc=gd;function ri(e,t,r){return(0,J._)`${gd(e)}.call(${t}, ${r})`}F.isOwnProperty=ri;function sy(e,t,r,o){let n=(0,J._)`${t}${(0,J.getProperty)(r)} !== undefined`;return o?(0,J._)`${n} && ${ri(e,t,r)}`:n}F.propertyInData=sy;function oi(e,t,r,o){let n=(0,J._)`${t}${(0,J.getProperty)(r)} === undefined`;return o?(0,J.or)(n,(0,J.not)(ri(e,t,r))):n}F.noPropertyInData=oi;function _d(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}F.allSchemaProperties=_d;function iy(e,t){return _d(t).filter(r=>!(0,ti.alwaysValidSchema)(e,t[r]))}F.schemaProperties=iy;function ay({schemaCode:e,data:t,it:{gen:r,topSchemaRef:o,schemaPath:n,errorPath:s},it:i},a,c,u){let l=u?(0,J._)`${e}, ${t}, ${o}${n}`:t,d=[[st.default.instancePath,(0,J.strConcat)(st.default.instancePath,s)],[st.default.parentData,i.parentData],[st.default.parentDataProperty,i.parentDataProperty],[st.default.rootData,st.default.rootData]];i.opts.dynamicRef&&d.push([st.default.dynamicAnchors,st.default.dynamicAnchors]);let f=(0,J._)`${l}, ${r.object(...d)}`;return c!==J.nil?(0,J._)`${a}.call(${c}, ${f})`:(0,J._)`${a}(${f})`}F.callValidateCode=ay;var cy=(0,J._)`new RegExp`;function uy({gen:e,it:{opts:t}},r){let o=t.unicodeRegExp?"u":"",{regExp:n}=t.code,s=n(r,o);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,J._)`${n.code==="new RegExp"?cy:(0,ty.useFunc)(e,n)}(${r}, ${o})`})}F.usePattern=uy;function ly(e){let{gen:t,data:r,keyword:o,it:n}=e,s=t.name("valid");if(n.allErrors){let a=t.let("valid",!0);return i(()=>t.assign(a,!1)),a}return t.var(s,!0),i(()=>t.break()),s;function i(a){let c=t.const("len",(0,J._)`${r}.length`);t.forRange("i",0,c,u=>{e.subschema({keyword:o,dataProp:u,dataPropType:ti.Type.Num},s),t.if((0,J.not)(s),a)})}}F.validateArray=ly;function dy(e){let{gen:t,schema:r,keyword:o,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,ti.alwaysValidSchema)(n,c))&&!n.opts.unevaluated)return;let i=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((c,u)=>{let l=e.subschema({keyword:o,schemaProp:u,compositeRule:!0},a);t.assign(i,(0,J._)`${i} || ${a}`),e.mergeValidEvaluated(l,a)||t.if((0,J.not)(i))})),e.result(i,()=>e.reset(),()=>e.error(!0))}F.validateUnion=dy});var $d=b(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.validateKeywordUsage=Me.validSchemaType=Me.funcKeywordCode=Me.macroKeywordCode=void 0;var _e=N(),vt=We(),py=Te(),fy=Pr();function my(e,t){let{gen:r,keyword:o,schema:n,parentSchema:s,it:i}=e,a=t.macro.call(i.self,n,s,i),c=vd(r,o,a);i.opts.validateSchema!==!1&&i.self.validateSchema(a,!0);let u=r.name("valid");e.subschema({schema:a,schemaPath:_e.nil,errSchemaPath:`${i.errSchemaPath}/${o}`,topSchemaRef:c,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}Me.macroKeywordCode=my;function hy(e,t){var r;let{gen:o,keyword:n,schema:s,parentSchema:i,$data:a,it:c}=e;_y(c,t);let u=!a&&t.compile?t.compile.call(c.self,s,i,c):t.validate,l=vd(o,n,u),d=o.let("valid");e.block$data(d,f),e.ok((r=t.valid)!==null&&r!==void 0?r:d);function f(){if(t.errors===!1)_(),t.modifying&&yd(e),y(()=>e.error());else{let v=t.async?m():g();t.modifying&&yd(e),y(()=>gy(e,v))}}function m(){let v=o.let("ruleErrs",null);return o.try(()=>_((0,_e._)`await `),z=>o.assign(d,!1).if((0,_e._)`${z} instanceof ${c.ValidationError}`,()=>o.assign(v,(0,_e._)`${z}.errors`),()=>o.throw(z))),v}function g(){let v=(0,_e._)`${l}.errors`;return o.assign(v,null),_(_e.nil),v}function _(v=t.async?(0,_e._)`await `:_e.nil){let z=c.opts.passContext?vt.default.this:vt.default.self,$=!("compile"in t&&!a||t.schema===!1);o.assign(d,(0,_e._)`${v}${(0,py.callValidateCode)(e,l,z,$)}`,t.modifying)}function y(v){var z;o.if((0,_e.not)((z=t.valid)!==null&&z!==void 0?z:d),v)}}Me.funcKeywordCode=hy;function yd(e){let{gen:t,data:r,it:o}=e;t.if(o.parentData,()=>t.assign(r,(0,_e._)`${o.parentData}[${o.parentDataProperty}]`))}function gy(e,t){let{gen:r}=e;r.if((0,_e._)`Array.isArray(${t})`,()=>{r.assign(vt.default.vErrors,(0,_e._)`${vt.default.vErrors} === null ? ${t} : ${vt.default.vErrors}.concat(${t})`).assign(vt.default.errors,(0,_e._)`${vt.default.vErrors}.length`),(0,fy.extendErrors)(e)},()=>e.error())}function _y({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function vd(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,_e.stringify)(r)})}function yy(e,t,r=!1){return!t.length||t.some(o=>o==="array"?Array.isArray(e):o==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==o||r&&typeof e>"u")}Me.validSchemaType=yy;function vy({schema:e,opts:t,self:r,errSchemaPath:o},n,s){if(Array.isArray(n.keyword)?!n.keyword.includes(s):n.keyword!==s)throw new Error("ajv implementation error");let i=n.dependencies;if(i?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${i.join(",")}`);if(n.validateSchema&&!n.validateSchema(e[s])){let c=`keyword "${s}" value is invalid at path "${o}": `+r.errorsText(n.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}Me.validateKeywordUsage=vy});var zd=b(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.extendSubschemaMode=it.extendSubschemaData=it.getSubschema=void 0;var Le=N(),bd=M();function $y(e,{keyword:t,schemaProp:r,schema:o,schemaPath:n,errSchemaPath:s,topSchemaRef:i}){if(t!==void 0&&o!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,Le._)`${e.schemaPath}${(0,Le.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,Le._)`${e.schemaPath}${(0,Le.getProperty)(t)}${(0,Le.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,bd.escapeFragment)(r)}`}}if(o!==void 0){if(n===void 0||s===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:n,topSchemaRef:i,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}it.getSubschema=$y;function by(e,t,{dataProp:r,dataPropType:o,data:n,dataTypes:s,propertyName:i}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(r!==void 0){let{errorPath:u,dataPathArr:l,opts:d}=t,f=a.let("data",(0,Le._)`${t.data}${(0,Le.getProperty)(r)}`,!0);c(f),e.errorPath=(0,Le.str)`${u}${(0,bd.getErrorPath)(r,o,d.jsPropertySyntax)}`,e.parentDataProperty=(0,Le._)`${r}`,e.dataPathArr=[...l,e.parentDataProperty]}if(n!==void 0){let u=n instanceof Le.Name?n:a.let("data",n,!0);c(u),i!==void 0&&(e.propertyName=i)}s&&(e.dataTypes=s);function c(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}it.extendSubschemaData=by;function zy(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:o,createErrors:n,allErrors:s}){o!==void 0&&(e.compositeRule=o),n!==void 0&&(e.createErrors=n),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=r}it.extendSubschemaMode=zy});var ni=b((ZP,xd)=>{"use strict";xd.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var o,n,s;if(Array.isArray(t)){if(o=t.length,o!=r.length)return!1;for(n=o;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),o=s.length,o!==Object.keys(r).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=o;n--!==0;){var i=s[n];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}});var kd=b((CP,wd)=>{"use strict";var at=wd.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var o=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};Ao(t,o,n,e,"",e)};at.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};at.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};at.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};at.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ao(e,t,r,o,n,s,i,a,c,u){if(o&&typeof o=="object"&&!Array.isArray(o)){t(o,n,s,i,a,c,u);for(var l in o){var d=o[l];if(Array.isArray(d)){if(l in at.arrayKeywords)for(var f=0;f<d.length;f++)Ao(e,t,r,d[f],n+"/"+l+"/"+f,s,n,l,o,f)}else if(l in at.propsKeywords){if(d&&typeof d=="object")for(var m in d)Ao(e,t,r,d[m],n+"/"+l+"/"+xy(m),s,n,l,o,m)}else(l in at.keywords||e.allKeys&&!(l in at.skipKeywords))&&Ao(e,t,r,d,n+"/"+l,s,n,l,o)}r(o,n,s,i,a,c,u)}}function xy(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Tr=b(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.getSchemaRefs=be.resolveUrl=be.normalizeId=be._getFullPath=be.getFullPath=be.inlineRef=void 0;var wy=M(),ky=ni(),Sy=kd(),Py=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Ey(e,t=!0){return typeof e=="boolean"?!0:t===!0?!si(e):t?Sd(e)<=t:!1}be.inlineRef=Ey;var Ty=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function si(e){for(let t in e){if(Ty.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(si)||typeof r=="object"&&si(r))return!0}return!1}function Sd(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!Py.has(r)&&(typeof e[r]=="object"&&(0,wy.eachItem)(e[r],o=>t+=Sd(o)),t===1/0))return 1/0}return t}function Pd(e,t="",r){r!==!1&&(t=qt(t));let o=e.parse(t);return Ed(e,o)}be.getFullPath=Pd;function Ed(e,t){return e.serialize(t).split("#")[0]+"#"}be._getFullPath=Ed;var Iy=/#\/?$/;function qt(e){return e?e.replace(Iy,""):""}be.normalizeId=qt;function Ry(e,t,r){return r=qt(r),e.resolve(t,r)}be.resolveUrl=Ry;var Ny=/^[a-z_][-a-z0-9._]*$/i;function Oy(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:o}=this.opts,n=qt(e[r]||t),s={"":n},i=Pd(o,n,!1),a={},c=new Set;return Sy(e,{allKeys:!0},(d,f,m,g)=>{if(g===void 0)return;let _=i+f,y=s[g];typeof d[r]=="string"&&(y=v.call(this,d[r])),z.call(this,d.$anchor),z.call(this,d.$dynamicAnchor),s[f]=y;function v($){let S=this.opts.uriResolver.resolve;if($=qt(y?S(y,$):$),c.has($))throw l($);c.add($);let E=this.refs[$];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?u(d,E.schema,$):$!==qt(_)&&($[0]==="#"?(u(d,a[$],$),a[$]=d):this.refs[$]=_),$}function z($){if(typeof $=="string"){if(!Ny.test($))throw new Error(`invalid anchor "${$}"`);v.call(this,`#${$}`)}}}),a;function u(d,f,m){if(f!==void 0&&!ky(d,f))throw l(m)}function l(d){return new Error(`reference "${d}" resolves to more than one schema`)}}be.getSchemaRefs=Oy});var Nr=b(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.getData=ct.KeywordCxt=ct.validateFunctionCode=void 0;var Od=cd(),Td=Er(),ai=Ys(),qo=Er(),jy=hd(),Rr=$d(),ii=zd(),k=N(),T=We(),Zy=Tr(),Ye=M(),Ir=Pr();function Cy(e){if(Cd(e)&&(Ad(e),Zd(e))){Dy(e);return}jd(e,()=>(0,Od.topBoolOrEmptySchema)(e))}ct.validateFunctionCode=Cy;function jd({gen:e,validateName:t,schema:r,schemaEnv:o,opts:n},s){n.code.es5?e.func(t,(0,k._)`${T.default.data}, ${T.default.valCxt}`,o.$async,()=>{e.code((0,k._)`"use strict"; ${Id(r,n)}`),qy(e,n),e.code(s)}):e.func(t,(0,k._)`${T.default.data}, ${Ay(n)}`,o.$async,()=>e.code(Id(r,n)).code(s))}function Ay(e){return(0,k._)`{${T.default.instancePath}="", ${T.default.parentData}, ${T.default.parentDataProperty}, ${T.default.rootData}=${T.default.data}${e.dynamicRef?(0,k._)`, ${T.default.dynamicAnchors}={}`:k.nil}}={}`}function qy(e,t){e.if(T.default.valCxt,()=>{e.var(T.default.instancePath,(0,k._)`${T.default.valCxt}.${T.default.instancePath}`),e.var(T.default.parentData,(0,k._)`${T.default.valCxt}.${T.default.parentData}`),e.var(T.default.parentDataProperty,(0,k._)`${T.default.valCxt}.${T.default.parentDataProperty}`),e.var(T.default.rootData,(0,k._)`${T.default.valCxt}.${T.default.rootData}`),t.dynamicRef&&e.var(T.default.dynamicAnchors,(0,k._)`${T.default.valCxt}.${T.default.dynamicAnchors}`)},()=>{e.var(T.default.instancePath,(0,k._)`""`),e.var(T.default.parentData,(0,k._)`undefined`),e.var(T.default.parentDataProperty,(0,k._)`undefined`),e.var(T.default.rootData,T.default.data),t.dynamicRef&&e.var(T.default.dynamicAnchors,(0,k._)`{}`)})}function Dy(e){let{schema:t,opts:r,gen:o}=e;jd(e,()=>{r.$comment&&t.$comment&&Dd(e),Vy(e),o.let(T.default.vErrors,null),o.let(T.default.errors,0),r.unevaluated&&My(e),qd(e),By(e)})}function My(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,k._)`${r}.evaluated`),t.if((0,k._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,k._)`${e.evaluated}.props`,(0,k._)`undefined`)),t.if((0,k._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,k._)`${e.evaluated}.items`,(0,k._)`undefined`))}function Id(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,k._)`/*# sourceURL=${r} */`:k.nil}function Ly(e,t){if(Cd(e)&&(Ad(e),Zd(e))){Uy(e,t);return}(0,Od.boolOrEmptySchema)(e,t)}function Zd({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function Cd(e){return typeof e.schema!="boolean"}function Uy(e,t){let{schema:r,gen:o,opts:n}=e;n.$comment&&r.$comment&&Dd(e),Hy(e),Ky(e);let s=o.const("_errs",T.default.errors);qd(e,s),o.var(t,(0,k._)`${s} === ${T.default.errors}`)}function Ad(e){(0,Ye.checkUnknownRules)(e),Fy(e)}function qd(e,t){if(e.opts.jtd)return Rd(e,[],!1,t);let r=(0,Td.getSchemaTypes)(e.schema),o=(0,Td.coerceAndCheckDataType)(e,r);Rd(e,r,!o,t)}function Fy(e){let{schema:t,errSchemaPath:r,opts:o,self:n}=e;t.$ref&&o.ignoreKeywordsWithRef&&(0,Ye.schemaHasRulesButRef)(t,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Vy(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ye.checkStrictMode)(e,"default is ignored in the schema root")}function Hy(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Zy.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Ky(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Dd({gen:e,schemaEnv:t,schema:r,errSchemaPath:o,opts:n}){let s=r.$comment;if(n.$comment===!0)e.code((0,k._)`${T.default.self}.logger.log(${s})`);else if(typeof n.$comment=="function"){let i=(0,k.str)`${o}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,k._)`${T.default.self}.opts.$comment(${s}, ${i}, ${a}.schema)`)}}function By(e){let{gen:t,schemaEnv:r,validateName:o,ValidationError:n,opts:s}=e;r.$async?t.if((0,k._)`${T.default.errors} === 0`,()=>t.return(T.default.data),()=>t.throw((0,k._)`new ${n}(${T.default.vErrors})`)):(t.assign((0,k._)`${o}.errors`,T.default.vErrors),s.unevaluated&&Gy(e),t.return((0,k._)`${T.default.errors} === 0`))}function Gy({gen:e,evaluated:t,props:r,items:o}){r instanceof k.Name&&e.assign((0,k._)`${t}.props`,r),o instanceof k.Name&&e.assign((0,k._)`${t}.items`,o)}function Rd(e,t,r,o){let{gen:n,schema:s,data:i,allErrors:a,opts:c,self:u}=e,{RULES:l}=u;if(s.$ref&&(c.ignoreKeywordsWithRef||!(0,Ye.schemaHasRulesButRef)(s,l))){n.block(()=>Ld(e,"$ref",l.all.$ref.definition));return}c.jtd||Jy(e,t),n.block(()=>{for(let f of l.rules)d(f);d(l.post)});function d(f){(0,ai.shouldUseGroup)(s,f)&&(f.type?(n.if((0,qo.checkDataType)(f.type,i,c.strictNumbers)),Nd(e,f),t.length===1&&t[0]===f.type&&r&&(n.else(),(0,qo.reportTypeError)(e)),n.endIf()):Nd(e,f),a||n.if((0,k._)`${T.default.errors} === ${o||0}`))}}function Nd(e,t){let{gen:r,schema:o,opts:{useDefaults:n}}=e;n&&(0,jy.assignDefaults)(e,t.type),r.block(()=>{for(let s of t.rules)(0,ai.shouldUseRule)(o,s)&&Ld(e,s.keyword,s.definition,t.type)})}function Jy(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Wy(e,t),e.opts.allowUnionTypes||Yy(e,t),Qy(e,e.dataTypes))}function Wy(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Md(e.dataTypes,r)||ci(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),ev(e,t)}}function Yy(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&ci(e,"use allowUnionTypes to allow union type keyword")}function Qy(e,t){let r=e.self.RULES.all;for(let o in r){let n=r[o];if(typeof n=="object"&&(0,ai.shouldUseRule)(e.schema,n)){let{type:s}=n.definition;s.length&&!s.some(i=>Xy(t,i))&&ci(e,`missing type "${s.join(",")}" for keyword "${o}"`)}}}function Xy(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Md(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function ev(e,t){let r=[];for(let o of e.dataTypes)Md(t,o)?r.push(o):t.includes("integer")&&o==="number"&&r.push("integer");e.dataTypes=r}function ci(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Ye.checkStrictMode)(e,t,e.opts.strictTypes)}var Do=class{constructor(t,r,o){if((0,Rr.validateKeywordUsage)(t,r,o),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=o,this.data=t.data,this.schema=t.schema[o],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ye.schemaRefOrVal)(t,this.schema,o,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Ud(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Rr.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${o} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",T.default.errors))}result(t,r,o){this.failResult((0,k.not)(t),r,o)}failResult(t,r,o){this.gen.if(t),o?o():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,k.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,k._)`${r} !== undefined && (${(0,k.or)(this.invalid$data(),t)})`)}error(t,r,o){if(r){this.setParams(r),this._error(t,o),this.setParams({});return}this._error(t,o)}_error(t,r){(t?Ir.reportExtraError:Ir.reportError)(this,this.def.error,r)}$dataError(){(0,Ir.reportError)(this,this.def.$dataError||Ir.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ir.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,o=k.nil){this.gen.block(()=>{this.check$data(t,o),r()})}check$data(t=k.nil,r=k.nil){if(!this.$data)return;let{gen:o,schemaCode:n,schemaType:s,def:i}=this;o.if((0,k.or)((0,k._)`${n} === undefined`,r)),t!==k.nil&&o.assign(t,!0),(s.length||i.validateSchema)&&(o.elseIf(this.invalid$data()),this.$dataError(),t!==k.nil&&o.assign(t,!1)),o.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:o,def:n,it:s}=this;return(0,k.or)(i(),a());function i(){if(o.length){if(!(r instanceof k.Name))throw new Error("ajv implementation error");let c=Array.isArray(o)?o:[o];return(0,k._)`${(0,qo.checkDataTypes)(c,r,s.opts.strictNumbers,qo.DataType.Wrong)}`}return k.nil}function a(){if(n.validateSchema){let c=t.scopeValue("validate$data",{ref:n.validateSchema});return(0,k._)`!${c}(${r})`}return k.nil}}subschema(t,r){let o=(0,ii.getSubschema)(this.it,t);(0,ii.extendSubschemaData)(o,this.it,t),(0,ii.extendSubschemaMode)(o,t);let n={...this.it,...o,items:void 0,props:void 0};return Ly(n,r),n}mergeEvaluated(t,r){let{it:o,gen:n}=this;o.opts.unevaluated&&(o.props!==!0&&t.props!==void 0&&(o.props=Ye.mergeEvaluated.props(n,t.props,o.props,r)),o.items!==!0&&t.items!==void 0&&(o.items=Ye.mergeEvaluated.items(n,t.items,o.items,r)))}mergeValidEvaluated(t,r){let{it:o,gen:n}=this;if(o.opts.unevaluated&&(o.props!==!0||o.items!==!0))return n.if(r,()=>this.mergeEvaluated(t,k.Name)),!0}};ct.KeywordCxt=Do;function Ld(e,t,r,o){let n=new Do(e,r,t);"code"in r?r.code(n,o):n.$data&&r.validate?(0,Rr.funcKeywordCode)(n,r):"macro"in r?(0,Rr.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,Rr.funcKeywordCode)(n,r)}var tv=/^\/(?:[^~]|~0|~1)*$/,rv=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ud(e,{dataLevel:t,dataNames:r,dataPathArr:o}){let n,s;if(e==="")return T.default.rootData;if(e[0]==="/"){if(!tv.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);n=e,s=T.default.rootData}else{let u=rv.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);let l=+u[1];if(n=u[2],n==="#"){if(l>=t)throw new Error(c("property/index",l));return o[t-l]}if(l>t)throw new Error(c("data",l));if(s=r[t-l],!n)return s}let i=s,a=n.split("/");for(let u of a)u&&(s=(0,k._)`${s}${(0,k.getProperty)((0,Ye.unescapeJsonPointer)(u))}`,i=(0,k._)`${i} && ${s}`);return i;function c(u,l){return`Cannot access ${u} ${l} levels up, current level is ${t}`}}ct.getData=Ud});var Mo=b(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});var ui=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};li.default=ui});var Or=b(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});var di=Tr(),pi=class extends Error{constructor(t,r,o,n){super(n||`can't resolve reference ${o} from id ${r}`),this.missingRef=(0,di.resolveUrl)(t,r,o),this.missingSchema=(0,di.normalizeId)((0,di.getFullPath)(t,this.missingRef))}};fi.default=pi});var Uo=b(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.resolveSchema=Ie.getCompilingSchema=Ie.resolveRef=Ie.compileSchema=Ie.SchemaEnv=void 0;var je=N(),ov=Mo(),$t=We(),Ze=Tr(),Fd=M(),nv=Nr(),Dt=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let o;typeof t.schema=="object"&&(o=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Ze.normalizeId)(o?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=o?.$async,this.refs={}}};Ie.SchemaEnv=Dt;function hi(e){let t=Vd.call(this,e);if(t)return t;let r=(0,Ze.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:o,lines:n}=this.opts.code,{ownProperties:s}=this.opts,i=new je.CodeGen(this.scope,{es5:o,lines:n,ownProperties:s}),a;e.$async&&(a=i.scopeValue("Error",{ref:ov.default,code:(0,je._)`require("ajv/dist/runtime/validation_error").default`}));let c=i.scopeName("validate");e.validateName=c;let u={gen:i,allErrors:this.opts.allErrors,data:$t.default.data,parentData:$t.default.parentData,parentDataProperty:$t.default.parentDataProperty,dataNames:[$t.default.data],dataPathArr:[je.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,je.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:je.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,je._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(e),(0,nv.validateFunctionCode)(u),i.optimize(this.opts.code.optimize);let d=i.toString();l=`${i.scopeRefs($t.default.scope)}return ${d}`,this.opts.code.process&&(l=this.opts.code.process(l,e));let m=new Function(`${$t.default.self}`,`${$t.default.scope}`,l)(this,this.scope.get());if(this.scope.value(c,{ref:m}),m.errors=null,m.schema=e.schema,m.schemaEnv=e,e.$async&&(m.$async=!0),this.opts.code.source===!0&&(m.source={validateName:c,validateCode:d,scopeValues:i._values}),this.opts.unevaluated){let{props:g,items:_}=u;m.evaluated={props:g instanceof je.Name?void 0:g,items:_ instanceof je.Name?void 0:_,dynamicProps:g instanceof je.Name,dynamicItems:_ instanceof je.Name},m.source&&(m.source.evaluated=(0,je.stringify)(m.evaluated))}return e.validate=m,e}catch(d){throw delete e.validate,delete e.validateName,l&&this.logger.error("Error compiling schema, function code:",l),d}finally{this._compilations.delete(e)}}Ie.compileSchema=hi;function sv(e,t,r){var o;r=(0,Ze.resolveUrl)(this.opts.uriResolver,t,r);let n=e.refs[r];if(n)return n;let s=cv.call(this,e,r);if(s===void 0){let i=(o=e.localRefs)===null||o===void 0?void 0:o[r],{schemaId:a}=this.opts;i&&(s=new Dt({schema:i,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[r]=iv.call(this,s)}Ie.resolveRef=sv;function iv(e){return(0,Ze.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:hi.call(this,e)}function Vd(e){for(let t of this._compilations)if(av(t,e))return t}Ie.getCompilingSchema=Vd;function av(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function cv(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Lo.call(this,e,t)}function Lo(e,t){let r=this.opts.uriResolver.parse(t),o=(0,Ze._getFullPath)(this.opts.uriResolver,r),n=(0,Ze.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&o===n)return mi.call(this,r,e);let s=(0,Ze.normalizeId)(o),i=this.refs[s]||this.schemas[s];if(typeof i=="string"){let a=Lo.call(this,e,i);return typeof a?.schema!="object"?void 0:mi.call(this,r,a)}if(typeof i?.schema=="object"){if(i.validate||hi.call(this,i),s===(0,Ze.normalizeId)(t)){let{schema:a}=i,{schemaId:c}=this.opts,u=a[c];return u&&(n=(0,Ze.resolveUrl)(this.opts.uriResolver,n,u)),new Dt({schema:a,schemaId:c,root:e,baseId:n})}return mi.call(this,r,i)}}Ie.resolveSchema=Lo;var uv=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function mi(e,{baseId:t,schema:r,root:o}){var n;if(((n=e.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,Fd.unescapeFragment)(a)];if(c===void 0)return;r=c;let u=typeof r=="object"&&r[this.opts.schemaId];!uv.has(a)&&u&&(t=(0,Ze.resolveUrl)(this.opts.uriResolver,t,u))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Fd.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Ze.resolveUrl)(this.opts.uriResolver,t,r.$ref);s=Lo.call(this,o,a)}let{schemaId:i}=this.opts;if(s=s||new Dt({schema:r,schemaId:i,root:o,baseId:t}),s.schema!==s.root.schema)return s}});var Hd=b((UP,lv)=>{lv.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var _i=b((FP,Jd)=>{"use strict";var dv=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),Bd=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function gi(e){let t="",r=0,o=0;for(o=0;o<e.length;o++)if(r=e[o].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[o];break}for(o+=1;o<e.length;o++){if(r=e[o].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[o]}return t}var pv=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Kd(e){return e.length=0,!0}function fv(e,t,r){if(e.length){let o=gi(e);if(o!=="")t.push(o);else return r.error=!0,!1;e.length=0}return!0}function mv(e){let t=0,r={error:!1,address:"",zone:""},o=[],n=[],s=!1,i=!1,a=fv;for(let c=0;c<e.length;c++){let u=e[c];if(!(u==="["||u==="]"))if(u===":"){if(s===!0&&(i=!0),!a(n,o,r))break;if(++t>7){r.error=!0;break}c>0&&e[c-1]===":"&&(s=!0),o.push(":");continue}else if(u==="%"){if(!a(n,o,r))break;a=Kd}else{n.push(u);continue}}return n.length&&(a===Kd?r.zone=n.join(""):i?o.push(n.join("")):o.push(gi(n))),r.address=o.join(""),r}function Gd(e){if(hv(e,":")<2)return{host:e,isIPV6:!1};let t=mv(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,o=t.address;return t.zone&&(r+="%"+t.zone,o+="%25"+t.zone),{host:r,isIPV6:!0,escapedHost:o}}}function hv(e,t){let r=0;for(let o=0;o<e.length;o++)e[o]===t&&r++;return r}function gv(e){let t=e,r=[],o=-1,n=0;for(;n=t.length;){if(n===1){if(t===".")break;if(t==="/"){r.push("/");break}else{r.push(t);break}}else if(n===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){r.push("/");break}}else if(n===3&&t==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),r.length!==0&&r.pop();continue}}if((o=t.indexOf("/",1))===-1){r.push(t);break}else r.push(t.slice(0,o)),t=t.slice(o)}return r.join("")}function _v(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function yv(e){let t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);if(!Bd(r)){let o=Gd(r);o.isIPV6===!0?r=`[${o.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}Jd.exports={nonSimpleDomain:pv,recomposeAuthority:yv,normalizeComponentEncoding:_v,removeDotSegments:gv,isIPv4:Bd,isUUID:dv,normalizeIPv6:Gd,stringArrayToHexStripped:gi}});var ep=b((VP,Xd)=>{"use strict";var{isUUID:vv}=_i(),$v=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,bv=["http","https","ws","wss","urn","urn:uuid"];function zv(e){return bv.indexOf(e)!==-1}function yi(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function Wd(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Yd(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function xv(e){return e.secure=yi(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function wv(e){if((e.port===(yi(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function kv(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match($v);if(r){let o=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let n=`${o}:${t.nid||e.nid}`,s=vi(n);e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Sv(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");let r=t.scheme||e.scheme||"urn",o=e.nid.toLowerCase(),n=`${r}:${t.nid||o}`,s=vi(n);s&&(e=s.serialize(e,t));let i=e,a=e.nss;return i.path=`${o||t.nid}:${a}`,t.skipEscape=!0,i}function Pv(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!vv(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Ev(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var Qd={scheme:"http",domainHost:!0,parse:Wd,serialize:Yd},Tv={scheme:"https",domainHost:Qd.domainHost,parse:Wd,serialize:Yd},Fo={scheme:"ws",domainHost:!0,parse:xv,serialize:wv},Iv={scheme:"wss",domainHost:Fo.domainHost,parse:Fo.parse,serialize:Fo.serialize},Rv={scheme:"urn",parse:kv,serialize:Sv,skipNormalize:!0},Nv={scheme:"urn:uuid",parse:Pv,serialize:Ev,skipNormalize:!0},Vo={http:Qd,https:Tv,ws:Fo,wss:Iv,urn:Rv,"urn:uuid":Nv};Object.setPrototypeOf(Vo,null);function vi(e){return e&&(Vo[e]||Vo[e.toLowerCase()])||void 0}Xd.exports={wsIsSecure:yi,SCHEMES:Vo,isValidSchemeName:zv,getSchemeHandler:vi}});var op=b((HP,Ko)=>{"use strict";var{normalizeIPv6:Ov,removeDotSegments:jr,recomposeAuthority:jv,normalizeComponentEncoding:Ho,isIPv4:Zv,nonSimpleDomain:Cv}=_i(),{SCHEMES:Av,getSchemeHandler:tp}=ep();function qv(e,t){return typeof e=="string"?e=Ue(Qe(e,t),t):typeof e=="object"&&(e=Qe(Ue(e,t),t)),e}function Dv(e,t,r){let o=r?Object.assign({scheme:"null"},r):{scheme:"null"},n=rp(Qe(e,o),Qe(t,o),o,!0);return o.skipEscape=!0,Ue(n,o)}function rp(e,t,r,o){let n={};return o||(e=Qe(Ue(e,r),r),t=Qe(Ue(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=jr(t.path||""),n.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=jr(t.path||""),n.query=t.query):(t.path?(t.path[0]==="/"?n.path=jr(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?n.path="/"+t.path:e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path,n.path=jr(n.path)),n.query=t.query):(n.path=e.path,t.query!==void 0?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function Mv(e,t,r){return typeof e=="string"?(e=unescape(e),e=Ue(Ho(Qe(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Ue(Ho(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Ue(Ho(Qe(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Ue(Ho(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Ue(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},o=Object.assign({},t),n=[],s=tp(o.scheme||r.scheme);s&&s.serialize&&s.serialize(r,o),r.path!==void 0&&(o.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),o.reference!=="suffix"&&r.scheme&&n.push(r.scheme,":");let i=jv(r);if(i!==void 0&&(o.reference!=="suffix"&&n.push("//"),n.push(i),r.path&&r.path[0]!=="/"&&n.push("/")),r.path!==void 0){let a=r.path;!o.absolutePath&&(!s||!s.absolutePath)&&(a=jr(a)),i===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),n.push(a)}return r.query!==void 0&&n.push("?",r.query),r.fragment!==void 0&&n.push("#",r.fragment),n.join("")}var Lv=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Qe(e,t){let r=Object.assign({},t),o={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=!1;r.reference==="suffix"&&(r.scheme?e=r.scheme+":"+e:e="//"+e);let s=e.match(Lv);if(s){if(o.scheme=s[1],o.userinfo=s[3],o.host=s[4],o.port=parseInt(s[5],10),o.path=s[6]||"",o.query=s[7],o.fragment=s[8],isNaN(o.port)&&(o.port=s[5]),o.host)if(Zv(o.host)===!1){let c=Ov(o.host);o.host=c.host.toLowerCase(),n=c.isIPV6}else n=!0;o.scheme===void 0&&o.userinfo===void 0&&o.host===void 0&&o.port===void 0&&o.query===void 0&&!o.path?o.reference="same-document":o.scheme===void 0?o.reference="relative":o.fragment===void 0?o.reference="absolute":o.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==o.reference&&(o.error=o.error||"URI is not a "+r.reference+" reference.");let i=tp(r.scheme||o.scheme);if(!r.unicodeSupport&&(!i||!i.unicodeSupport)&&o.host&&(r.domainHost||i&&i.domainHost)&&n===!1&&Cv(o.host))try{o.host=URL.domainToASCII(o.host.toLowerCase())}catch(a){o.error=o.error||"Host's domain name can not be converted to ASCII: "+a}(!i||i&&!i.skipNormalize)&&(e.indexOf("%")!==-1&&(o.scheme!==void 0&&(o.scheme=unescape(o.scheme)),o.host!==void 0&&(o.host=unescape(o.host))),o.path&&(o.path=escape(unescape(o.path))),o.fragment&&(o.fragment=encodeURI(decodeURIComponent(o.fragment)))),i&&i.parse&&i.parse(o,r)}else o.error=o.error||"URI can not be parsed.";return o}var $i={SCHEMES:Av,normalize:qv,resolve:Dv,resolveComponent:rp,equal:Mv,serialize:Ue,parse:Qe};Ko.exports=$i;Ko.exports.default=$i;Ko.exports.fastUri=$i});var sp=b(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});var np=op();np.code='require("ajv/dist/runtime/uri").default';bi.default=np});var fp=b(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.CodeGen=ce.Name=ce.nil=ce.stringify=ce.str=ce._=ce.KeywordCxt=void 0;var Uv=Nr();Object.defineProperty(ce,"KeywordCxt",{enumerable:!0,get:function(){return Uv.KeywordCxt}});var Mt=N();Object.defineProperty(ce,"_",{enumerable:!0,get:function(){return Mt._}});Object.defineProperty(ce,"str",{enumerable:!0,get:function(){return Mt.str}});Object.defineProperty(ce,"stringify",{enumerable:!0,get:function(){return Mt.stringify}});Object.defineProperty(ce,"nil",{enumerable:!0,get:function(){return Mt.nil}});Object.defineProperty(ce,"Name",{enumerable:!0,get:function(){return Mt.Name}});Object.defineProperty(ce,"CodeGen",{enumerable:!0,get:function(){return Mt.CodeGen}});var Fv=Mo(),lp=Or(),Vv=Ws(),Zr=Uo(),Hv=N(),Cr=Tr(),Bo=Er(),xi=M(),ip=Hd(),Kv=sp(),dp=(e,t)=>new RegExp(e,t);dp.code="new RegExp";var Bv=["removeAdditional","useDefaults","coerceTypes"],Gv=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Jv={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Wv={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},ap=200;function Yv(e){var t,r,o,n,s,i,a,c,u,l,d,f,m,g,_,y,v,z,$,S,E,me,we,wt,gn;let Gt=e.strict,_n=(t=e.code)===null||t===void 0?void 0:t.optimize,za=_n===!0||_n===void 0?1:_n||0,xa=(o=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&o!==void 0?o:dp,Df=(n=e.uriResolver)!==null&&n!==void 0?n:Kv.default;return{strictSchema:(i=(s=e.strictSchema)!==null&&s!==void 0?s:Gt)!==null&&i!==void 0?i:!0,strictNumbers:(c=(a=e.strictNumbers)!==null&&a!==void 0?a:Gt)!==null&&c!==void 0?c:!0,strictTypes:(l=(u=e.strictTypes)!==null&&u!==void 0?u:Gt)!==null&&l!==void 0?l:"log",strictTuples:(f=(d=e.strictTuples)!==null&&d!==void 0?d:Gt)!==null&&f!==void 0?f:"log",strictRequired:(g=(m=e.strictRequired)!==null&&m!==void 0?m:Gt)!==null&&g!==void 0?g:!1,code:e.code?{...e.code,optimize:za,regExp:xa}:{optimize:za,regExp:xa},loopRequired:(_=e.loopRequired)!==null&&_!==void 0?_:ap,loopEnum:(y=e.loopEnum)!==null&&y!==void 0?y:ap,meta:(v=e.meta)!==null&&v!==void 0?v:!0,messages:(z=e.messages)!==null&&z!==void 0?z:!0,inlineRefs:($=e.inlineRefs)!==null&&$!==void 0?$:!0,schemaId:(S=e.schemaId)!==null&&S!==void 0?S:"$id",addUsedSchema:(E=e.addUsedSchema)!==null&&E!==void 0?E:!0,validateSchema:(me=e.validateSchema)!==null&&me!==void 0?me:!0,validateFormats:(we=e.validateFormats)!==null&&we!==void 0?we:!0,unicodeRegExp:(wt=e.unicodeRegExp)!==null&&wt!==void 0?wt:!0,int32range:(gn=e.int32range)!==null&&gn!==void 0?gn:!0,uriResolver:Df}}var Ar=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...Yv(t)};let{es5:r,lines:o}=this.opts.code;this.scope=new Hv.ValueScope({scope:{},prefixes:Gv,es5:r,lines:o}),this.logger=o$(t.logger);let n=t.validateFormats;t.validateFormats=!1,this.RULES=(0,Vv.getRules)(),cp.call(this,Jv,t,"NOT SUPPORTED"),cp.call(this,Wv,t,"DEPRECATED","warn"),this._metaOpts=t$.call(this),t.formats&&Xv.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&e$.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),Qv.call(this),t.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:o}=this.opts,n=ip;o==="id"&&(n={...ip},n.id=n.$id,delete n.$id),r&&t&&this.addMetaSchema(n,n[o],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let o;if(typeof t=="string"){if(o=this.getSchema(t),!o)throw new Error(`no schema with key or ref "${t}"`)}else o=this.compile(t);let n=o(r);return"$async"in o||(this.errors=o.errors),n}compile(t,r){let o=this._addSchema(t,r);return o.validate||this._compileSchemaEnv(o)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:o}=this.opts;return n.call(this,t,r);async function n(l,d){await s.call(this,l.$schema);let f=this._addSchema(l,d);return f.validate||i.call(this,f)}async function s(l){l&&!this.getSchema(l)&&await n.call(this,{$ref:l},!0)}async function i(l){try{return this._compileSchemaEnv(l)}catch(d){if(!(d instanceof lp.default))throw d;return a.call(this,d),await c.call(this,d.missingSchema),i.call(this,l)}}function a({missingSchema:l,missingRef:d}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${d} cannot be resolved`)}async function c(l){let d=await u.call(this,l);this.refs[l]||await s.call(this,d.$schema),this.refs[l]||this.addSchema(d,l,r)}async function u(l){let d=this._loading[l];if(d)return d;try{return await(this._loading[l]=o(l))}finally{delete this._loading[l]}}}addSchema(t,r,o,n=this.opts.validateSchema){if(Array.isArray(t)){for(let i of t)this.addSchema(i,void 0,o,n);return this}let s;if(typeof t=="object"){let{schemaId:i}=this.opts;if(s=t[i],s!==void 0&&typeof s!="string")throw new Error(`schema ${i} must be string`)}return r=(0,Cr.normalizeId)(r||s),this._checkUnique(r),this.schemas[r]=this._addSchema(t,o,r,n,!0),this}addMetaSchema(t,r,o=this.opts.validateSchema){return this.addSchema(t,r,!0,o),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let o;if(o=t.$schema,o!==void 0&&typeof o!="string")throw new Error("$schema must be a string");if(o=o||this.opts.defaultMeta||this.defaultMeta(),!o)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(o,t);if(!n&&r){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return n}getSchema(t){let r;for(;typeof(r=up.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:o}=this.opts,n=new Zr.SchemaEnv({schema:{},schemaId:o});if(r=Zr.resolveSchema.call(this,n,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=up.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let o=t[this.opts.schemaId];return o&&(o=(0,Cr.normalizeId)(o),delete this.schemas[o],delete this.refs[o]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let o;if(typeof t=="string")o=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=o);else if(typeof t=="object"&&r===void 0){if(r=t,o=r.keyword,Array.isArray(o)&&!o.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(s$.call(this,o,r),!r)return(0,xi.eachItem)(o,s=>zi.call(this,s)),this;a$.call(this,r);let n={...r,type:(0,Bo.getJSONTypes)(r.type),schemaType:(0,Bo.getJSONTypes)(r.schemaType)};return(0,xi.eachItem)(o,n.type.length===0?s=>zi.call(this,s,n):s=>n.type.forEach(i=>zi.call(this,s,n,i))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let o of r.rules){let n=o.rules.findIndex(s=>s.keyword===t);n>=0&&o.rules.splice(n,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:o="data"}={}){return!t||t.length===0?"No errors":t.map(n=>`${o}${n.instancePath} ${n.message}`).reduce((n,s)=>n+r+s)}$dataMetaSchema(t,r){let o=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let n of r){let s=n.split("/").slice(1),i=t;for(let a of s)i=i[a];for(let a in o){let c=o[a];if(typeof c!="object")continue;let{$data:u}=c.definition,l=i[a];u&&l&&(i[a]=pp(l))}}return t}_removeAllSchemas(t,r){for(let o in t){let n=t[o];(!r||r.test(o))&&(typeof n=="string"?delete t[o]:n&&!n.meta&&(this._cache.delete(n.schema),delete t[o]))}}_addSchema(t,r,o,n=this.opts.validateSchema,s=this.opts.addUsedSchema){let i,{schemaId:a}=this.opts;if(typeof t=="object")i=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(t);if(c!==void 0)return c;o=(0,Cr.normalizeId)(i||o);let u=Cr.getSchemaRefs.call(this,t,o);return c=new Zr.SchemaEnv({schema:t,schemaId:a,meta:r,baseId:o,localRefs:u}),this._cache.set(c.schema,c),s&&!o.startsWith("#")&&(o&&this._checkUnique(o),this.refs[o]=c),n&&this.validateSchema(t,!0),c}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Zr.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{Zr.compileSchema.call(this,t)}finally{this.opts=r}}};Ar.ValidationError=Fv.default;Ar.MissingRefError=lp.default;ce.default=Ar;function cp(e,t,r,o="error"){for(let n in e){let s=n;s in t&&this.logger[o](`${r}: option ${n}. ${e[s]}`)}}function up(e){return e=(0,Cr.normalizeId)(e),this.schemas[e]||this.refs[e]}function Qv(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function Xv(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function e$(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function t$(){let e={...this.opts};for(let t of Bv)delete e[t];return e}var r$={log(){},warn(){},error(){}};function o$(e){if(e===!1)return r$;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var n$=/^[a-z_$][a-z0-9_$:-]*$/i;function s$(e,t){let{RULES:r}=this;if((0,xi.eachItem)(e,o=>{if(r.keywords[o])throw new Error(`Keyword ${o} is already defined`);if(!n$.test(o))throw new Error(`Keyword ${o} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function zi(e,t,r){var o;let n=t?.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,i=n?s.post:s.rules.find(({type:c})=>c===r);if(i||(i={type:r,rules:[]},s.rules.push(i)),s.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,Bo.getJSONTypes)(t.type),schemaType:(0,Bo.getJSONTypes)(t.schemaType)}};t.before?i$.call(this,i,a,t.before):i.rules.push(a),s.all[e]=a,(o=t.implements)===null||o===void 0||o.forEach(c=>this.addKeyword(c))}function i$(e,t,r){let o=e.rules.findIndex(n=>n.keyword===r);o>=0?e.rules.splice(o,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function a$(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=pp(t)),e.validateSchema=this.compile(t,!0))}var c$={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function pp(e){return{anyOf:[e,c$]}}});var mp=b(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});var u$={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};wi.default=u$});var yp=b(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.callRef=bt.getValidate=void 0;var l$=Or(),hp=Te(),ze=N(),Lt=We(),gp=Uo(),Go=M(),d$={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:o}=e,{baseId:n,schemaEnv:s,validateName:i,opts:a,self:c}=o,{root:u}=s;if((r==="#"||r==="#/")&&n===u.baseId)return d();let l=gp.resolveRef.call(c,u,n,r);if(l===void 0)throw new l$.default(o.opts.uriResolver,n,r);if(l instanceof gp.SchemaEnv)return f(l);return m(l);function d(){if(s===u)return Jo(e,i,s,s.$async);let g=t.scopeValue("root",{ref:u});return Jo(e,(0,ze._)`${g}.validate`,u,u.$async)}function f(g){let _=_p(e,g);Jo(e,_,g,g.$async)}function m(g){let _=t.scopeValue("schema",a.code.source===!0?{ref:g,code:(0,ze.stringify)(g)}:{ref:g}),y=t.name("valid"),v=e.subschema({schema:g,dataTypes:[],schemaPath:ze.nil,topSchemaRef:_,errSchemaPath:r},y);e.mergeEvaluated(v),e.ok(y)}}};function _p(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,ze._)`${r.scopeValue("wrapper",{ref:t})}.validate`}bt.getValidate=_p;function Jo(e,t,r,o){let{gen:n,it:s}=e,{allErrors:i,schemaEnv:a,opts:c}=s,u=c.passContext?Lt.default.this:ze.nil;o?l():d();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let g=n.let("valid");n.try(()=>{n.code((0,ze._)`await ${(0,hp.callValidateCode)(e,t,u)}`),m(t),i||n.assign(g,!0)},_=>{n.if((0,ze._)`!(${_} instanceof ${s.ValidationError})`,()=>n.throw(_)),f(_),i||n.assign(g,!1)}),e.ok(g)}function d(){e.result((0,hp.callValidateCode)(e,t,u),()=>m(t),()=>f(t))}function f(g){let _=(0,ze._)`${g}.errors`;n.assign(Lt.default.vErrors,(0,ze._)`${Lt.default.vErrors} === null ? ${_} : ${Lt.default.vErrors}.concat(${_})`),n.assign(Lt.default.errors,(0,ze._)`${Lt.default.vErrors}.length`)}function m(g){var _;if(!s.opts.unevaluated)return;let y=(_=r?.validate)===null||_===void 0?void 0:_.evaluated;if(s.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(s.props=Go.mergeEvaluated.props(n,y.props,s.props));else{let v=n.var("props",(0,ze._)`${g}.evaluated.props`);s.props=Go.mergeEvaluated.props(n,v,s.props,ze.Name)}if(s.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(s.items=Go.mergeEvaluated.items(n,y.items,s.items));else{let v=n.var("items",(0,ze._)`${g}.evaluated.items`);s.items=Go.mergeEvaluated.items(n,v,s.items,ze.Name)}}}bt.callRef=Jo;bt.default=d$});var vp=b(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var p$=mp(),f$=yp(),m$=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",p$.default,f$.default];ki.default=m$});var $p=b(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});var Wo=N(),ut=Wo.operators,Yo={maximum:{okStr:"<=",ok:ut.LTE,fail:ut.GT},minimum:{okStr:">=",ok:ut.GTE,fail:ut.LT},exclusiveMaximum:{okStr:"<",ok:ut.LT,fail:ut.GTE},exclusiveMinimum:{okStr:">",ok:ut.GT,fail:ut.LTE}},h$={message:({keyword:e,schemaCode:t})=>(0,Wo.str)`must be ${Yo[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Wo._)`{comparison: ${Yo[e].okStr}, limit: ${t}}`},g$={keyword:Object.keys(Yo),type:"number",schemaType:"number",$data:!0,error:h$,code(e){let{keyword:t,data:r,schemaCode:o}=e;e.fail$data((0,Wo._)`${r} ${Yo[t].fail} ${o} || isNaN(${r})`)}};Si.default=g$});var bp=b(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});var qr=N(),_$={message:({schemaCode:e})=>(0,qr.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,qr._)`{multipleOf: ${e}}`},y$={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:_$,code(e){let{gen:t,data:r,schemaCode:o,it:n}=e,s=n.opts.multipleOfPrecision,i=t.let("res"),a=s?(0,qr._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${s}`:(0,qr._)`${i} !== parseInt(${i})`;e.fail$data((0,qr._)`(${o} === 0 || (${i} = ${r}/${o}, ${a}))`)}};Pi.default=y$});var xp=b(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});function zp(e){let t=e.length,r=0,o=0,n;for(;o<t;)r++,n=e.charCodeAt(o++),n>=55296&&n<=56319&&o<t&&(n=e.charCodeAt(o),(n&64512)===56320&&o++);return r}Ei.default=zp;zp.code='require("ajv/dist/runtime/ucs2length").default'});var wp=b(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var zt=N(),v$=M(),$$=xp(),b$={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,zt.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,zt._)`{limit: ${e}}`},z$={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:b$,code(e){let{keyword:t,data:r,schemaCode:o,it:n}=e,s=t==="maxLength"?zt.operators.GT:zt.operators.LT,i=n.opts.unicode===!1?(0,zt._)`${r}.length`:(0,zt._)`${(0,v$.useFunc)(e.gen,$$.default)}(${r})`;e.fail$data((0,zt._)`${i} ${s} ${o}`)}};Ti.default=z$});var kp=b(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});var x$=Te(),Qo=N(),w$={message:({schemaCode:e})=>(0,Qo.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Qo._)`{pattern: ${e}}`},k$={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:w$,code(e){let{data:t,$data:r,schema:o,schemaCode:n,it:s}=e,i=s.opts.unicodeRegExp?"u":"",a=r?(0,Qo._)`(new RegExp(${n}, ${i}))`:(0,x$.usePattern)(e,o);e.fail$data((0,Qo._)`!${a}.test(${t})`)}};Ii.default=k$});var Sp=b(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});var Dr=N(),S$={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,Dr.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Dr._)`{limit: ${e}}`},P$={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:S$,code(e){let{keyword:t,data:r,schemaCode:o}=e,n=t==="maxProperties"?Dr.operators.GT:Dr.operators.LT;e.fail$data((0,Dr._)`Object.keys(${r}).length ${n} ${o}`)}};Ri.default=P$});var Pp=b(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});var Mr=Te(),Lr=N(),E$=M(),T$={message:({params:{missingProperty:e}})=>(0,Lr.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Lr._)`{missingProperty: ${e}}`},I$={keyword:"required",type:"object",schemaType:"array",$data:!0,error:T$,code(e){let{gen:t,schema:r,schemaCode:o,data:n,$data:s,it:i}=e,{opts:a}=i;if(!s&&r.length===0)return;let c=r.length>=a.loopRequired;if(i.allErrors?u():l(),a.strictRequired){let m=e.parentSchema.properties,{definedProperties:g}=e.it;for(let _ of r)if(m?.[_]===void 0&&!g.has(_)){let y=i.schemaEnv.baseId+i.errSchemaPath,v=`required property "${_}" is not defined at "${y}" (strictRequired)`;(0,E$.checkStrictMode)(i,v,i.opts.strictRequired)}}function u(){if(c||s)e.block$data(Lr.nil,d);else for(let m of r)(0,Mr.checkReportMissingProp)(e,m)}function l(){let m=t.let("missing");if(c||s){let g=t.let("valid",!0);e.block$data(g,()=>f(m,g)),e.ok(g)}else t.if((0,Mr.checkMissingProp)(e,r,m)),(0,Mr.reportMissingProp)(e,m),t.else()}function d(){t.forOf("prop",o,m=>{e.setParams({missingProperty:m}),t.if((0,Mr.noPropertyInData)(t,n,m,a.ownProperties),()=>e.error())})}function f(m,g){e.setParams({missingProperty:m}),t.forOf(m,o,()=>{t.assign(g,(0,Mr.propertyInData)(t,n,m,a.ownProperties)),t.if((0,Lr.not)(g),()=>{e.error(),t.break()})},Lr.nil)}}};Ni.default=I$});var Ep=b(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var Ur=N(),R$={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,Ur.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Ur._)`{limit: ${e}}`},N$={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:R$,code(e){let{keyword:t,data:r,schemaCode:o}=e,n=t==="maxItems"?Ur.operators.GT:Ur.operators.LT;e.fail$data((0,Ur._)`${r}.length ${n} ${o}`)}};Oi.default=N$});var Xo=b(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});var Tp=ni();Tp.code='require("ajv/dist/runtime/equal").default';ji.default=Tp});var Ip=b(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});var Zi=Er(),ue=N(),O$=M(),j$=Xo(),Z$={message:({params:{i:e,j:t}})=>(0,ue.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,ue._)`{i: ${e}, j: ${t}}`},C$={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Z$,code(e){let{gen:t,data:r,$data:o,schema:n,parentSchema:s,schemaCode:i,it:a}=e;if(!o&&!n)return;let c=t.let("valid"),u=s.items?(0,Zi.getSchemaTypes)(s.items):[];e.block$data(c,l,(0,ue._)`${i} === false`),e.ok(c);function l(){let g=t.let("i",(0,ue._)`${r}.length`),_=t.let("j");e.setParams({i:g,j:_}),t.assign(c,!0),t.if((0,ue._)`${g} > 1`,()=>(d()?f:m)(g,_))}function d(){return u.length>0&&!u.some(g=>g==="object"||g==="array")}function f(g,_){let y=t.name("item"),v=(0,Zi.checkDataTypes)(u,y,a.opts.strictNumbers,Zi.DataType.Wrong),z=t.const("indices",(0,ue._)`{}`);t.for((0,ue._)`;${g}--;`,()=>{t.let(y,(0,ue._)`${r}[${g}]`),t.if(v,(0,ue._)`continue`),u.length>1&&t.if((0,ue._)`typeof ${y} == "string"`,(0,ue._)`${y} += "_"`),t.if((0,ue._)`typeof ${z}[${y}] == "number"`,()=>{t.assign(_,(0,ue._)`${z}[${y}]`),e.error(),t.assign(c,!1).break()}).code((0,ue._)`${z}[${y}] = ${g}`)})}function m(g,_){let y=(0,O$.useFunc)(t,j$.default),v=t.name("outer");t.label(v).for((0,ue._)`;${g}--;`,()=>t.for((0,ue._)`${_} = ${g}; ${_}--;`,()=>t.if((0,ue._)`${y}(${r}[${g}], ${r}[${_}])`,()=>{e.error(),t.assign(c,!1).break(v)})))}}};Ci.default=C$});var Rp=b(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});var Ai=N(),A$=M(),q$=Xo(),D$={message:"must be equal to constant",params:({schemaCode:e})=>(0,Ai._)`{allowedValue: ${e}}`},M$={keyword:"const",$data:!0,error:D$,code(e){let{gen:t,data:r,$data:o,schemaCode:n,schema:s}=e;o||s&&typeof s=="object"?e.fail$data((0,Ai._)`!${(0,A$.useFunc)(t,q$.default)}(${r}, ${n})`):e.fail((0,Ai._)`${s} !== ${r}`)}};qi.default=M$});var Np=b(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});var Fr=N(),L$=M(),U$=Xo(),F$={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Fr._)`{allowedValues: ${e}}`},V$={keyword:"enum",schemaType:"array",$data:!0,error:F$,code(e){let{gen:t,data:r,$data:o,schema:n,schemaCode:s,it:i}=e;if(!o&&n.length===0)throw new Error("enum must have non-empty array");let a=n.length>=i.opts.loopEnum,c,u=()=>c??(c=(0,L$.useFunc)(t,U$.default)),l;if(a||o)l=t.let("valid"),e.block$data(l,d);else{if(!Array.isArray(n))throw new Error("ajv implementation error");let m=t.const("vSchema",s);l=(0,Fr.or)(...n.map((g,_)=>f(m,_)))}e.pass(l);function d(){t.assign(l,!1),t.forOf("v",s,m=>t.if((0,Fr._)`${u()}(${r}, ${m})`,()=>t.assign(l,!0).break()))}function f(m,g){let _=n[g];return typeof _=="object"&&_!==null?(0,Fr._)`${u()}(${r}, ${m}[${g}])`:(0,Fr._)`${r} === ${_}`}}};Di.default=V$});var Op=b(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});var H$=$p(),K$=bp(),B$=wp(),G$=kp(),J$=Sp(),W$=Pp(),Y$=Ep(),Q$=Ip(),X$=Rp(),e0=Np(),t0=[H$.default,K$.default,B$.default,G$.default,J$.default,W$.default,Y$.default,Q$.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},X$.default,e0.default];Mi.default=t0});var Ui=b(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.validateAdditionalItems=void 0;var xt=N(),Li=M(),r0={message:({params:{len:e}})=>(0,xt.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,xt._)`{limit: ${e}}`},o0={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:r0,code(e){let{parentSchema:t,it:r}=e,{items:o}=t;if(!Array.isArray(o)){(0,Li.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}jp(e,o)}};function jp(e,t){let{gen:r,schema:o,data:n,keyword:s,it:i}=e;i.items=!0;let a=r.const("len",(0,xt._)`${n}.length`);if(o===!1)e.setParams({len:t.length}),e.pass((0,xt._)`${a} <= ${t.length}`);else if(typeof o=="object"&&!(0,Li.alwaysValidSchema)(i,o)){let u=r.var("valid",(0,xt._)`${a} <= ${t.length}`);r.if((0,xt.not)(u),()=>c(u)),e.ok(u)}function c(u){r.forRange("i",t.length,a,l=>{e.subschema({keyword:s,dataProp:l,dataPropType:Li.Type.Num},u),i.allErrors||r.if((0,xt.not)(u),()=>r.break())})}}Vr.validateAdditionalItems=jp;Vr.default=o0});var Fi=b(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.validateTuple=void 0;var Zp=N(),en=M(),n0=Te(),s0={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return Cp(e,"additionalItems",t);r.items=!0,!(0,en.alwaysValidSchema)(r,t)&&e.ok((0,n0.validateArray)(e))}};function Cp(e,t,r=e.schema){let{gen:o,parentSchema:n,data:s,keyword:i,it:a}=e;l(n),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=en.mergeEvaluated.items(o,r.length,a.items));let c=o.name("valid"),u=o.const("len",(0,Zp._)`${s}.length`);r.forEach((d,f)=>{(0,en.alwaysValidSchema)(a,d)||(o.if((0,Zp._)`${u} > ${f}`,()=>e.subschema({keyword:i,schemaProp:f,dataProp:f},c)),e.ok(c))});function l(d){let{opts:f,errSchemaPath:m}=a,g=r.length,_=g===d.minItems&&(g===d.maxItems||d[t]===!1);if(f.strictTuples&&!_){let y=`"${i}" is ${g}-tuple, but minItems or maxItems/${t} are not specified or different at path "${m}"`;(0,en.checkStrictMode)(a,y,f.strictTuples)}}}Hr.validateTuple=Cp;Hr.default=s0});var Ap=b(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});var i0=Fi(),a0={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,i0.validateTuple)(e,"items")};Vi.default=a0});var Dp=b(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});var qp=N(),c0=M(),u0=Te(),l0=Ui(),d0={message:({params:{len:e}})=>(0,qp.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,qp._)`{limit: ${e}}`},p0={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:d0,code(e){let{schema:t,parentSchema:r,it:o}=e,{prefixItems:n}=r;o.items=!0,!(0,c0.alwaysValidSchema)(o,t)&&(n?(0,l0.validateAdditionalItems)(e,n):e.ok((0,u0.validateArray)(e)))}};Hi.default=p0});var Mp=b(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});var Re=N(),tn=M(),f0={message:({params:{min:e,max:t}})=>t===void 0?(0,Re.str)`must contain at least ${e} valid item(s)`:(0,Re.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Re._)`{minContains: ${e}}`:(0,Re._)`{minContains: ${e}, maxContains: ${t}}`},m0={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:f0,code(e){let{gen:t,schema:r,parentSchema:o,data:n,it:s}=e,i,a,{minContains:c,maxContains:u}=o;s.opts.next?(i=c===void 0?1:c,a=u):i=1;let l=t.const("len",(0,Re._)`${n}.length`);if(e.setParams({min:i,max:a}),a===void 0&&i===0){(0,tn.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&i>a){(0,tn.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,tn.alwaysValidSchema)(s,r)){let _=(0,Re._)`${l} >= ${i}`;a!==void 0&&(_=(0,Re._)`${_} && ${l} <= ${a}`),e.pass(_);return}s.items=!0;let d=t.name("valid");a===void 0&&i===1?m(d,()=>t.if(d,()=>t.break())):i===0?(t.let(d,!0),a!==void 0&&t.if((0,Re._)`${n}.length > 0`,f)):(t.let(d,!1),f()),e.result(d,()=>e.reset());function f(){let _=t.name("_valid"),y=t.let("count",0);m(_,()=>t.if(_,()=>g(y)))}function m(_,y){t.forRange("i",0,l,v=>{e.subschema({keyword:"contains",dataProp:v,dataPropType:tn.Type.Num,compositeRule:!0},_),y()})}function g(_){t.code((0,Re._)`${_}++`),a===void 0?t.if((0,Re._)`${_} >= ${i}`,()=>t.assign(d,!0).break()):(t.if((0,Re._)`${_} > ${a}`,()=>t.assign(d,!1).break()),i===1?t.assign(d,!0):t.if((0,Re._)`${_} >= ${i}`,()=>t.assign(d,!0)))}}};Ki.default=m0});var Fp=b(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.validateSchemaDeps=Fe.validatePropertyDeps=Fe.error=void 0;var Bi=N(),h0=M(),Kr=Te();Fe.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let o=t===1?"property":"properties";return(0,Bi.str)`must have ${o} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:o}})=>(0,Bi._)`{property: ${e},
    missingProperty: ${o},
    depsCount: ${t},
    deps: ${r}}`};var g0={keyword:"dependencies",type:"object",schemaType:"object",error:Fe.error,code(e){let[t,r]=_0(e);Lp(e,t),Up(e,r)}};function _0({schema:e}){let t={},r={};for(let o in e){if(o==="__proto__")continue;let n=Array.isArray(e[o])?t:r;n[o]=e[o]}return[t,r]}function Lp(e,t=e.schema){let{gen:r,data:o,it:n}=e;if(Object.keys(t).length===0)return;let s=r.let("missing");for(let i in t){let a=t[i];if(a.length===0)continue;let c=(0,Kr.propertyInData)(r,o,i,n.opts.ownProperties);e.setParams({property:i,depsCount:a.length,deps:a.join(", ")}),n.allErrors?r.if(c,()=>{for(let u of a)(0,Kr.checkReportMissingProp)(e,u)}):(r.if((0,Bi._)`${c} && (${(0,Kr.checkMissingProp)(e,a,s)})`),(0,Kr.reportMissingProp)(e,s),r.else())}}Fe.validatePropertyDeps=Lp;function Up(e,t=e.schema){let{gen:r,data:o,keyword:n,it:s}=e,i=r.name("valid");for(let a in t)(0,h0.alwaysValidSchema)(s,t[a])||(r.if((0,Kr.propertyInData)(r,o,a,s.opts.ownProperties),()=>{let c=e.subschema({keyword:n,schemaProp:a},i);e.mergeValidEvaluated(c,i)},()=>r.var(i,!0)),e.ok(i))}Fe.validateSchemaDeps=Up;Fe.default=g0});var Hp=b(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var Vp=N(),y0=M(),v0={message:"property name must be valid",params:({params:e})=>(0,Vp._)`{propertyName: ${e.propertyName}}`},$0={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:v0,code(e){let{gen:t,schema:r,data:o,it:n}=e;if((0,y0.alwaysValidSchema)(n,r))return;let s=t.name("valid");t.forIn("key",o,i=>{e.setParams({propertyName:i}),e.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},s),t.if((0,Vp.not)(s),()=>{e.error(!0),n.allErrors||t.break()})}),e.ok(s)}};Gi.default=$0});var Wi=b(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});var rn=Te(),Ce=N(),b0=We(),on=M(),z0={message:"must NOT have additional properties",params:({params:e})=>(0,Ce._)`{additionalProperty: ${e.additionalProperty}}`},x0={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:z0,code(e){let{gen:t,schema:r,parentSchema:o,data:n,errsCount:s,it:i}=e;if(!s)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=i;if(i.props=!0,c.removeAdditional!=="all"&&(0,on.alwaysValidSchema)(i,r))return;let u=(0,rn.allSchemaProperties)(o.properties),l=(0,rn.allSchemaProperties)(o.patternProperties);d(),e.ok((0,Ce._)`${s} === ${b0.default.errors}`);function d(){t.forIn("key",n,y=>{!u.length&&!l.length?g(y):t.if(f(y),()=>g(y))})}function f(y){let v;if(u.length>8){let z=(0,on.schemaRefOrVal)(i,o.properties,"properties");v=(0,rn.isOwnProperty)(t,z,y)}else u.length?v=(0,Ce.or)(...u.map(z=>(0,Ce._)`${y} === ${z}`)):v=Ce.nil;return l.length&&(v=(0,Ce.or)(v,...l.map(z=>(0,Ce._)`${(0,rn.usePattern)(e,z)}.test(${y})`))),(0,Ce.not)(v)}function m(y){t.code((0,Ce._)`delete ${n}[${y}]`)}function g(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){m(y);return}if(r===!1){e.setParams({additionalProperty:y}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,on.alwaysValidSchema)(i,r)){let v=t.name("valid");c.removeAdditional==="failing"?(_(y,v,!1),t.if((0,Ce.not)(v),()=>{e.reset(),m(y)})):(_(y,v),a||t.if((0,Ce.not)(v),()=>t.break()))}}function _(y,v,z){let $={keyword:"additionalProperties",dataProp:y,dataPropType:on.Type.Str};z===!1&&Object.assign($,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema($,v)}}};Ji.default=x0});var Gp=b(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});var w0=Nr(),Kp=Te(),Yi=M(),Bp=Wi(),k0={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:o,data:n,it:s}=e;s.opts.removeAdditional==="all"&&o.additionalProperties===void 0&&Bp.default.code(new w0.KeywordCxt(s,Bp.default,"additionalProperties"));let i=(0,Kp.allSchemaProperties)(r);for(let d of i)s.definedProperties.add(d);s.opts.unevaluated&&i.length&&s.props!==!0&&(s.props=Yi.mergeEvaluated.props(t,(0,Yi.toHash)(i),s.props));let a=i.filter(d=>!(0,Yi.alwaysValidSchema)(s,r[d]));if(a.length===0)return;let c=t.name("valid");for(let d of a)u(d)?l(d):(t.if((0,Kp.propertyInData)(t,n,d,s.opts.ownProperties)),l(d),s.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(c);function u(d){return s.opts.useDefaults&&!s.compositeRule&&r[d].default!==void 0}function l(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},c)}}};Qi.default=k0});var Qp=b(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var Jp=Te(),nn=N(),Wp=M(),Yp=M(),S0={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:o,parentSchema:n,it:s}=e,{opts:i}=s,a=(0,Jp.allSchemaProperties)(r),c=a.filter(_=>(0,Wp.alwaysValidSchema)(s,r[_]));if(a.length===0||c.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;let u=i.strictSchema&&!i.allowMatchingProperties&&n.properties,l=t.name("valid");s.props!==!0&&!(s.props instanceof nn.Name)&&(s.props=(0,Yp.evaluatedPropsToName)(t,s.props));let{props:d}=s;f();function f(){for(let _ of a)u&&m(_),s.allErrors?g(_):(t.var(l,!0),g(_),t.if(l))}function m(_){for(let y in u)new RegExp(_).test(y)&&(0,Wp.checkStrictMode)(s,`property ${y} matches pattern ${_} (use allowMatchingProperties)`)}function g(_){t.forIn("key",o,y=>{t.if((0,nn._)`${(0,Jp.usePattern)(e,_)}.test(${y})`,()=>{let v=c.includes(_);v||e.subschema({keyword:"patternProperties",schemaProp:_,dataProp:y,dataPropType:Yp.Type.Str},l),s.opts.unevaluated&&d!==!0?t.assign((0,nn._)`${d}[${y}]`,!0):!v&&!s.allErrors&&t.if((0,nn.not)(l),()=>t.break())})})}}};Xi.default=S0});var Xp=b(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});var P0=M(),E0={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:o}=e;if((0,P0.alwaysValidSchema)(o,r)){e.fail();return}let n=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};ea.default=E0});var ef=b(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});var T0=Te(),I0={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:T0.validateUnion,error:{message:"must match a schema in anyOf"}};ta.default=I0});var tf=b(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});var sn=N(),R0=M(),N0={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,sn._)`{passingSchemas: ${e.passing}}`},O0={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:N0,code(e){let{gen:t,schema:r,parentSchema:o,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&o.discriminator)return;let s=r,i=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(i,()=>e.reset(),()=>e.error(!0));function u(){s.forEach((l,d)=>{let f;(0,R0.alwaysValidSchema)(n,l)?t.var(c,!0):f=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},c),d>0&&t.if((0,sn._)`${c} && ${i}`).assign(i,!1).assign(a,(0,sn._)`[${a}, ${d}]`).else(),t.if(c,()=>{t.assign(i,!0),t.assign(a,d),f&&e.mergeEvaluated(f,sn.Name)})})}}};ra.default=O0});var rf=b(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});var j0=M(),Z0={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let n=t.name("valid");r.forEach((s,i)=>{if((0,j0.alwaysValidSchema)(o,s))return;let a=e.subschema({keyword:"allOf",schemaProp:i},n);e.ok(n),e.mergeEvaluated(a)})}};oa.default=Z0});var sf=b(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});var an=N(),nf=M(),C0={message:({params:e})=>(0,an.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,an._)`{failingKeyword: ${e.ifClause}}`},A0={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:C0,code(e){let{gen:t,parentSchema:r,it:o}=e;r.then===void 0&&r.else===void 0&&(0,nf.checkStrictMode)(o,'"if" without "then" and "else" is ignored');let n=of(o,"then"),s=of(o,"else");if(!n&&!s)return;let i=t.let("valid",!0),a=t.name("_valid");if(c(),e.reset(),n&&s){let l=t.let("ifClause");e.setParams({ifClause:l}),t.if(a,u("then",l),u("else",l))}else n?t.if(a,u("then")):t.if((0,an.not)(a),u("else"));e.pass(i,()=>e.error(!0));function c(){let l=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(l)}function u(l,d){return()=>{let f=e.subschema({keyword:l},a);t.assign(i,a),e.mergeValidEvaluated(f,i),d?t.assign(d,(0,an._)`${l}`):e.setParams({ifClause:l})}}}};function of(e,t){let r=e.schema[t];return r!==void 0&&!(0,nf.alwaysValidSchema)(e,r)}na.default=A0});var af=b(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});var q0=M(),D0={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,q0.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};sa.default=D0});var cf=b(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});var M0=Ui(),L0=Ap(),U0=Fi(),F0=Dp(),V0=Mp(),H0=Fp(),K0=Hp(),B0=Wi(),G0=Gp(),J0=Qp(),W0=Xp(),Y0=ef(),Q0=tf(),X0=rf(),eb=sf(),tb=af();function rb(e=!1){let t=[W0.default,Y0.default,Q0.default,X0.default,eb.default,tb.default,K0.default,B0.default,H0.default,G0.default,J0.default];return e?t.push(L0.default,F0.default):t.push(M0.default,U0.default),t.push(V0.default),t}ia.default=rb});var uf=b(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});var re=N(),ob={message:({schemaCode:e})=>(0,re.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,re._)`{format: ${e}}`},nb={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:ob,code(e,t){let{gen:r,data:o,$data:n,schema:s,schemaCode:i,it:a}=e,{opts:c,errSchemaPath:u,schemaEnv:l,self:d}=a;if(!c.validateFormats)return;n?f():m();function f(){let g=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),_=r.const("fDef",(0,re._)`${g}[${i}]`),y=r.let("fType"),v=r.let("format");r.if((0,re._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>r.assign(y,(0,re._)`${_}.type || "string"`).assign(v,(0,re._)`${_}.validate`),()=>r.assign(y,(0,re._)`"string"`).assign(v,_)),e.fail$data((0,re.or)(z(),$()));function z(){return c.strictSchema===!1?re.nil:(0,re._)`${i} && !${v}`}function $(){let S=l.$async?(0,re._)`(${_}.async ? await ${v}(${o}) : ${v}(${o}))`:(0,re._)`${v}(${o})`,E=(0,re._)`(typeof ${v} == "function" ? ${S} : ${v}.test(${o}))`;return(0,re._)`${v} && ${v} !== true && ${y} === ${t} && !${E}`}}function m(){let g=d.formats[s];if(!g){z();return}if(g===!0)return;let[_,y,v]=$(g);_===t&&e.pass(S());function z(){if(c.strictSchema===!1){d.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function $(E){let me=E instanceof RegExp?(0,re.regexpCode)(E):c.code.formats?(0,re._)`${c.code.formats}${(0,re.getProperty)(s)}`:void 0,we=r.scopeValue("formats",{key:s,ref:E,code:me});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,re._)`${we}.validate`]:["string",E,we]}function S(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!l.$async)throw new Error("async format in sync schema");return(0,re._)`await ${v}(${o})`}return typeof y=="function"?(0,re._)`${v}(${o})`:(0,re._)`${v}.test(${o})`}}}};aa.default=nb});var lf=b(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});var sb=uf(),ib=[sb.default];ca.default=ib});var df=b(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.contentVocabulary=Ut.metadataVocabulary=void 0;Ut.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ut.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var ff=b(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});var ab=vp(),cb=Op(),ub=cf(),lb=lf(),pf=df(),db=[ab.default,cb.default,(0,ub.default)(),lb.default,pf.metadataVocabulary,pf.contentVocabulary];ua.default=db});var hf=b(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.DiscrError=void 0;var mf;(function(e){e.Tag="tag",e.Mapping="mapping"})(mf||(cn.DiscrError=mf={}))});var _f=b(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});var Ft=N(),la=hf(),gf=Uo(),pb=Or(),fb=M(),mb={message:({params:{discrError:e,tagName:t}})=>e===la.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Ft._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},hb={keyword:"discriminator",type:"object",schemaType:"object",error:mb,code(e){let{gen:t,data:r,schema:o,parentSchema:n,it:s}=e,{oneOf:i}=n;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=o.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(o.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let c=t.let("valid",!1),u=t.const("tag",(0,Ft._)`${r}${(0,Ft.getProperty)(a)}`);t.if((0,Ft._)`typeof ${u} == "string"`,()=>l(),()=>e.error(!1,{discrError:la.DiscrError.Tag,tag:u,tagName:a})),e.ok(c);function l(){let m=f();t.if(!1);for(let g in m)t.elseIf((0,Ft._)`${u} === ${g}`),t.assign(c,d(m[g]));t.else(),e.error(!1,{discrError:la.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function d(m){let g=t.name("valid"),_=e.subschema({keyword:"oneOf",schemaProp:m},g);return e.mergeEvaluated(_,Ft.Name),g}function f(){var m;let g={},_=v(n),y=!0;for(let S=0;S<i.length;S++){let E=i[S];if(E?.$ref&&!(0,fb.schemaHasRulesButRef)(E,s.self.RULES)){let we=E.$ref;if(E=gf.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,we),E instanceof gf.SchemaEnv&&(E=E.schema),E===void 0)throw new pb.default(s.opts.uriResolver,s.baseId,we)}let me=(m=E?.properties)===null||m===void 0?void 0:m[a];if(typeof me!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(_||v(E)),z(me,S)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return g;function v({required:S}){return Array.isArray(S)&&S.includes(a)}function z(S,E){if(S.const)$(S.const,E);else if(S.enum)for(let me of S.enum)$(me,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function $(S,E){if(typeof S!="string"||S in g)throw new Error(`discriminator: "${a}" values must be unique strings`);g[S]=E}}}};da.default=hb});var yf=b((OE,gb)=>{gb.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var fa=b((W,pa)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.MissingRefError=W.ValidationError=W.CodeGen=W.Name=W.nil=W.stringify=W.str=W._=W.KeywordCxt=W.Ajv=void 0;var _b=fp(),yb=ff(),vb=_f(),vf=yf(),$b=["/properties"],un="http://json-schema.org/draft-07/schema",Vt=class extends _b.default{_addVocabularies(){super._addVocabularies(),yb.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(vb.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(vf,$b):vf;this.addMetaSchema(t,un,!1),this.refs["http://json-schema.org/schema"]=un}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(un)?un:void 0)}};W.Ajv=Vt;pa.exports=W=Vt;pa.exports.Ajv=Vt;Object.defineProperty(W,"__esModule",{value:!0});W.default=Vt;var bb=Nr();Object.defineProperty(W,"KeywordCxt",{enumerable:!0,get:function(){return bb.KeywordCxt}});var Ht=N();Object.defineProperty(W,"_",{enumerable:!0,get:function(){return Ht._}});Object.defineProperty(W,"str",{enumerable:!0,get:function(){return Ht.str}});Object.defineProperty(W,"stringify",{enumerable:!0,get:function(){return Ht.stringify}});Object.defineProperty(W,"nil",{enumerable:!0,get:function(){return Ht.nil}});Object.defineProperty(W,"Name",{enumerable:!0,get:function(){return Ht.Name}});Object.defineProperty(W,"CodeGen",{enumerable:!0,get:function(){return Ht.CodeGen}});var zb=Mo();Object.defineProperty(W,"ValidationError",{enumerable:!0,get:function(){return zb.default}});var xb=Or();Object.defineProperty(W,"MissingRefError",{enumerable:!0,get:function(){return xb.default}})});var Pf=b(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.formatNames=He.fastFormats=He.fullFormats=void 0;function Ve(e,t){return{validate:e,compare:t}}He.fullFormats={date:Ve(xf,_a),time:Ve(ha(!0),ya),"date-time":Ve($f(!0),kf),"iso-time":Ve(ha(),wf),"iso-date-time":Ve($f(),Sf),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Tb,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Cb,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Ib,int32:{type:"number",validate:Ob},int64:{type:"number",validate:jb},float:{type:"number",validate:zf},double:{type:"number",validate:zf},password:!0,binary:!0};He.fastFormats={...He.fullFormats,date:Ve(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,_a),time:Ve(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,ya),"date-time":Ve(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,kf),"iso-time":Ve(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,wf),"iso-date-time":Ve(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Sf),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};He.formatNames=Object.keys(He.fullFormats);function wb(e){return e%4===0&&(e%100!==0||e%400===0)}var kb=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Sb=[0,31,28,31,30,31,30,31,31,30,31,30,31];function xf(e){let t=kb.exec(e);if(!t)return!1;let r=+t[1],o=+t[2],n=+t[3];return o>=1&&o<=12&&n>=1&&n<=(o===2&&wb(r)?29:Sb[o])}function _a(e,t){if(e&&t)return e>t?1:e<t?-1:0}var ma=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function ha(e){return function(r){let o=ma.exec(r);if(!o)return!1;let n=+o[1],s=+o[2],i=+o[3],a=o[4],c=o[5]==="-"?-1:1,u=+(o[6]||0),l=+(o[7]||0);if(u>23||l>59||e&&!a)return!1;if(n<=23&&s<=59&&i<60)return!0;let d=s-l*c,f=n-u*c-(d<0?1:0);return(f===23||f===-1)&&(d===59||d===-1)&&i<61}}function ya(e,t){if(!(e&&t))return;let r=new Date("2020-01-01T"+e).valueOf(),o=new Date("2020-01-01T"+t).valueOf();if(r&&o)return r-o}function wf(e,t){if(!(e&&t))return;let r=ma.exec(e),o=ma.exec(t);if(r&&o)return e=r[1]+r[2]+r[3],t=o[1]+o[2]+o[3],e>t?1:e<t?-1:0}var ga=/t|\s/i;function $f(e){let t=ha(e);return function(o){let n=o.split(ga);return n.length===2&&xf(n[0])&&t(n[1])}}function kf(e,t){if(!(e&&t))return;let r=new Date(e).valueOf(),o=new Date(t).valueOf();if(r&&o)return r-o}function Sf(e,t){if(!(e&&t))return;let[r,o]=e.split(ga),[n,s]=t.split(ga),i=_a(r,n);if(i!==void 0)return i||ya(o,s)}var Pb=/\/|:/,Eb=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Tb(e){return Pb.test(e)&&Eb.test(e)}var bf=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Ib(e){return bf.lastIndex=0,bf.test(e)}var Rb=-(2**31),Nb=2**31-1;function Ob(e){return Number.isInteger(e)&&e<=Nb&&e>=Rb}function jb(e){return Number.isInteger(e)}function zf(){return!0}var Zb=/[^\\]\\Z/;function Cb(e){if(Zb.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}});var Ef=b(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.formatLimitDefinition=void 0;var Ab=fa(),Ae=N(),lt=Ae.operators,ln={formatMaximum:{okStr:"<=",ok:lt.LTE,fail:lt.GT},formatMinimum:{okStr:">=",ok:lt.GTE,fail:lt.LT},formatExclusiveMaximum:{okStr:"<",ok:lt.LT,fail:lt.GTE},formatExclusiveMinimum:{okStr:">",ok:lt.GT,fail:lt.LTE}},qb={message:({keyword:e,schemaCode:t})=>(0,Ae.str)`should be ${ln[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Ae._)`{comparison: ${ln[e].okStr}, limit: ${t}}`};Kt.formatLimitDefinition={keyword:Object.keys(ln),type:"string",schemaType:"string",$data:!0,error:qb,code(e){let{gen:t,data:r,schemaCode:o,keyword:n,it:s}=e,{opts:i,self:a}=s;if(!i.validateFormats)return;let c=new Ab.KeywordCxt(s,a.RULES.all.format.definition,"format");c.$data?u():l();function u(){let f=t.scopeValue("formats",{ref:a.formats,code:i.code.formats}),m=t.const("fmt",(0,Ae._)`${f}[${c.schemaCode}]`);e.fail$data((0,Ae.or)((0,Ae._)`typeof ${m} != "object"`,(0,Ae._)`${m} instanceof RegExp`,(0,Ae._)`typeof ${m}.compare != "function"`,d(m)))}function l(){let f=c.schema,m=a.formats[f];if(!m||m===!0)return;if(typeof m!="object"||m instanceof RegExp||typeof m.compare!="function")throw new Error(`"${n}": format "${f}" does not define "compare" function`);let g=t.scopeValue("formats",{key:f,ref:m,code:i.code.formats?(0,Ae._)`${i.code.formats}${(0,Ae.getProperty)(f)}`:void 0});e.fail$data(d(g))}function d(f){return(0,Ae._)`${f}.compare(${r}, ${o}) ${ln[n].fail} 0`}},dependencies:["format"]};var Db=e=>(e.addKeyword(Kt.formatLimitDefinition),e);Kt.default=Db});var Nf=b((Br,Rf)=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});var Bt=Pf(),Mb=Ef(),va=N(),Tf=new va.Name("fullFormats"),Lb=new va.Name("fastFormats"),$a=(e,t={keywords:!0})=>{if(Array.isArray(t))return If(e,t,Bt.fullFormats,Tf),e;let[r,o]=t.mode==="fast"?[Bt.fastFormats,Lb]:[Bt.fullFormats,Tf],n=t.formats||Bt.formatNames;return If(e,n,r,o),t.keywords&&(0,Mb.default)(e),e};$a.get=(e,t="full")=>{let o=(t==="fast"?Bt.fastFormats:Bt.fullFormats)[e];if(!o)throw new Error(`Unknown format "${e}"`);return o};function If(e,t,r,o){var n,s;(n=(s=e.opts.code).formats)!==null&&n!==void 0||(s.formats=(0,va._)`require("ajv-formats/dist/formats").${o}`);for(let i of t)e.addFormat(i,r[i])}Rf.exports=Br=$a;Object.defineProperty(Br,"__esModule",{value:!0});Br.default=$a});var Bb=Object.freeze({status:"aborted"});function h(e,t,r){function o(a,c){var u;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(u=a._zod).traits??(u.traits=new Set),a._zod.traits.add(e),t(a,c);for(let l in i.prototype)l in a||Object.defineProperty(a,l,{value:i.prototype[l].bind(a)});a._zod.constr=i,a._zod.def=c}let n=r?.Parent??Object;class s extends n{}Object.defineProperty(s,"name",{value:e});function i(a){var c;let u=r?.Parent?new s:this;o(u,a),(c=u._zod).deferred??(c.deferred=[]);for(let l of u._zod.deferred)l();return u}return Object.defineProperty(i,"init",{value:o}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>r?.Parent&&a instanceof r.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}var Ke=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},Gr={};function ke(e){return e&&Object.assign(Gr,e),Gr}var L={};wa(L,{BIGINT_FORMAT_RANGES:()=>Pa,Class:()=>$n,NUMBER_FORMAT_RANGES:()=>En,aborted:()=>pt,allowsEval:()=>kn,assert:()=>Wf,assertEqual:()=>Kf,assertIs:()=>Gf,assertNever:()=>Jf,assertNotEqual:()=>Bf,assignProp:()=>wn,cached:()=>Wt,captureStackTrace:()=>Wr,cleanEnum:()=>um,cleanRegex:()=>Qt,clone:()=>qe,createTransparentProxy:()=>rm,defineLazy:()=>H,esc:()=>dt,escapeRegex:()=>Xe,extend:()=>sm,finalizeIssue:()=>Ne,floatSafeRemainder:()=>xn,getElementAtPath:()=>Yf,getEnumValues:()=>bn,getLengthableOrigin:()=>Xt,getParsedType:()=>tm,getSizableOrigin:()=>Ea,isObject:()=>kt,isPlainObject:()=>St,issue:()=>Tn,joinValues:()=>Jr,jsonStringifyReplacer:()=>zn,merge:()=>im,normalizeParams:()=>P,nullish:()=>Yt,numKeys:()=>em,omit:()=>nm,optionalKeys:()=>Pn,partial:()=>am,pick:()=>om,prefixIssues:()=>De,primitiveTypes:()=>Sa,promiseAllObject:()=>Qf,propertyKeyTypes:()=>Sn,randomString:()=>Xf,required:()=>cm,stringifyPrimitive:()=>Yr,unwrapMessage:()=>Jt});function Kf(e){return e}function Bf(e){return e}function Gf(e){}function Jf(e){throw new Error}function Wf(e){}function bn(e){let t=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,n])=>t.indexOf(+o)===-1).map(([o,n])=>n)}function Jr(e,t="|"){return e.map(r=>Yr(r)).join(t)}function zn(e,t){return typeof t=="bigint"?t.toString():t}function Wt(e){return{get value(){{let r=e();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function Yt(e){return e==null}function Qt(e){let t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function xn(e,t){let r=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,n=r>o?r:o,s=Number.parseInt(e.toFixed(n).replace(".","")),i=Number.parseInt(t.toFixed(n).replace(".",""));return s%i/10**n}function H(e,t,r){Object.defineProperty(e,t,{get(){{let n=r();return e[t]=n,n}throw new Error("cached value already set")},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function wn(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Yf(e,t){return t?t.reduce((r,o)=>r?.[o],e):e}function Qf(e){let t=Object.keys(e),r=t.map(o=>e[o]);return Promise.all(r).then(o=>{let n={};for(let s=0;s<t.length;s++)n[t[s]]=o[s];return n})}function Xf(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let o=0;o<e;o++)r+=t[Math.floor(Math.random()*t.length)];return r}function dt(e){return JSON.stringify(e)}var Wr=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function kt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}var kn=Wt(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let e=Function;return new e(""),!0}catch{return!1}});function St(e){if(kt(e)===!1)return!1;let t=e.constructor;if(t===void 0)return!0;let r=t.prototype;return!(kt(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function em(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}var tm=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},Sn=new Set(["string","number","symbol"]),Sa=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Xe(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function qe(e,t,r){let o=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(o._zod.parent=e),o}function P(e){let t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function rm(e){let t;return new Proxy({},{get(r,o,n){return t??(t=e()),Reflect.get(t,o,n)},set(r,o,n,s){return t??(t=e()),Reflect.set(t,o,n,s)},has(r,o){return t??(t=e()),Reflect.has(t,o)},deleteProperty(r,o){return t??(t=e()),Reflect.deleteProperty(t,o)},ownKeys(r){return t??(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(r,o){return t??(t=e()),Reflect.getOwnPropertyDescriptor(t,o)},defineProperty(r,o,n){return t??(t=e()),Reflect.defineProperty(t,o,n)}})}function Yr(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function Pn(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}var En={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Pa={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function om(e,t){let r={},o=e._zod.def;for(let n in t){if(!(n in o.shape))throw new Error(`Unrecognized key: "${n}"`);t[n]&&(r[n]=o.shape[n])}return qe(e,{...e._zod.def,shape:r,checks:[]})}function nm(e,t){let r={...e._zod.def.shape},o=e._zod.def;for(let n in t){if(!(n in o.shape))throw new Error(`Unrecognized key: "${n}"`);t[n]&&delete r[n]}return qe(e,{...e._zod.def,shape:r,checks:[]})}function sm(e,t){if(!St(t))throw new Error("Invalid input to extend: expected a plain object");let r={...e._zod.def,get shape(){let o={...e._zod.def.shape,...t};return wn(this,"shape",o),o},checks:[]};return qe(e,r)}function im(e,t){return qe(e,{...e._zod.def,get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return wn(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function am(e,t,r){let o=t._zod.def.shape,n={...o};if(r)for(let s in r){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(n[s]=e?new e({type:"optional",innerType:o[s]}):o[s])}else for(let s in o)n[s]=e?new e({type:"optional",innerType:o[s]}):o[s];return qe(t,{...t._zod.def,shape:n,checks:[]})}function cm(e,t,r){let o=t._zod.def.shape,n={...o};if(r)for(let s in r){if(!(s in n))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(n[s]=new e({type:"nonoptional",innerType:o[s]}))}else for(let s in o)n[s]=new e({type:"nonoptional",innerType:o[s]});return qe(t,{...t._zod.def,shape:n,checks:[]})}function pt(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function De(e,t){return t.map(r=>{var o;return(o=r).path??(o.path=[]),r.path.unshift(e),r})}function Jt(e){return typeof e=="string"?e:e?.message}function Ne(e,t,r){let o={...e,path:e.path??[]};if(!e.message){let n=Jt(e.inst?._zod.def?.error?.(e))??Jt(t?.error?.(e))??Jt(r.customError?.(e))??Jt(r.localeError?.(e))??"Invalid input";o.message=n}return delete o.inst,delete o.continue,t?.reportInput||delete o.input,o}function Ea(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function Xt(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Tn(...e){let[t,r,o]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:o}:{...t}}function um(e){return Object.entries(e).filter(([t,r])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}var $n=class{constructor(...t){}};var Ta=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,zn,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Qr=h("$ZodError",Ta),In=h("$ZodError",Ta,{Parent:Error});function Ia(e,t=r=>r.message){let r={},o=[];for(let n of e.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(t(n))):o.push(t(n));return{formErrors:o,fieldErrors:r}}function Ra(e,t){let r=t||function(s){return s.message},o={_errors:[]},n=s=>{for(let i of s.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>n({issues:a}));else if(i.code==="invalid_key")n({issues:i.issues});else if(i.code==="invalid_element")n({issues:i.issues});else if(i.path.length===0)o._errors.push(r(i));else{let a=o,c=0;for(;c<i.path.length;){let u=i.path[c];c===i.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(i))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return n(e),o}var Na=e=>(t,r,o,n)=>{let s=o?Object.assign(o,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise)throw new Ke;if(i.issues.length){let a=new(n?.Err??e)(i.issues.map(c=>Ne(c,s,ke())));throw Wr(a,n?.callee),a}return i.value};var Oa=e=>async(t,r,o,n)=>{let s=o?Object.assign(o,{async:!0}):{async:!0},i=t._zod.run({value:r,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){let a=new(n?.Err??e)(i.issues.map(c=>Ne(c,s,ke())));throw Wr(a,n?.callee),a}return i.value};var Rn=e=>(t,r,o)=>{let n=o?{...o,async:!1}:{async:!1},s=t._zod.run({value:r,issues:[]},n);if(s instanceof Promise)throw new Ke;return s.issues.length?{success:!1,error:new(e??Qr)(s.issues.map(i=>Ne(i,n,ke())))}:{success:!0,data:s.value}},er=Rn(In),Nn=e=>async(t,r,o)=>{let n=o?Object.assign(o,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},n);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(i=>Ne(i,n,ke())))}:{success:!0,data:s.value}},Xr=Nn(In);var ja=/^[cC][^\s-]{8,}$/,Za=/^[0-9a-z]+$/,Ca=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Aa=/^[0-9a-vA-V]{20}$/,qa=/^[A-Za-z0-9]{27}$/,Da=/^[a-zA-Z0-9_-]{21}$/,Ma=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var La=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,On=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;var Ua=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;var dm="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Fa(){return new RegExp(dm,"u")}var Va=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ha=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Ka=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ba=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ga=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,jn=/^[A-Za-z0-9_-]*$/,Ja=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/;var Wa=/^\+(?:[0-9]){6,14}[0-9]$/,Ya="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Qa=new RegExp(`^${Ya}$`);function Xa(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ec(e){return new RegExp(`^${Xa(e)}$`)}function tc(e){let t=Xa({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");let o=`${t}(?:${r.join("|")})`;return new RegExp(`^${Ya}T(?:${o})$`)}var rc=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)};var oc=/^\d+$/,nc=/^-?\d+(?:\.\d+)?/i,sc=/true|false/i,ic=/null/i;var ac=/^[^A-Z]*$/,cc=/^[^a-z]*$/;var le=h("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),uc={number:"number",bigint:"bigint",object:"date"},Cn=h("$ZodCheckLessThan",(e,t)=>{le.init(e,t);let r=uc[typeof t.value];e._zod.onattach.push(o=>{let n=o._zod.bag,s=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:r,code:"too_big",maximum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),An=h("$ZodCheckGreaterThan",(e,t)=>{le.init(e,t);let r=uc[typeof t.value];e._zod.onattach.push(o=>{let n=o._zod.bag,s=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:r,code:"too_small",minimum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),lc=h("$ZodCheckMultipleOf",(e,t)=>{le.init(e,t),e._zod.onattach.push(r=>{var o;(o=r._zod.bag).multipleOf??(o.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):xn(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),dc=h("$ZodCheckNumberFormat",(e,t)=>{le.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),o=r?"int":"number",[n,s]=En[t.format];e._zod.onattach.push(i=>{let a=i._zod.bag;a.format=t.format,a.minimum=n,a.maximum=s,r&&(a.pattern=oc)}),e._zod.check=i=>{let a=i.value;if(r){if(!Number.isInteger(a)){i.issues.push({expected:o,format:t.format,code:"invalid_type",input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?i.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}):i.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort});return}}a<n&&i.issues.push({origin:"number",input:a,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!t.abort}),a>s&&i.issues.push({origin:"number",input:a,code:"too_big",maximum:s,inst:e})}});var pc=h("$ZodCheckMaxLength",(e,t)=>{var r;le.init(e,t),(r=e._zod.def).when??(r.when=o=>{let n=o.value;return!Yt(n)&&n.length!==void 0}),e._zod.onattach.push(o=>{let n=o._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(o._zod.bag.maximum=t.maximum)}),e._zod.check=o=>{let n=o.value;if(n.length<=t.maximum)return;let i=Xt(n);o.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),fc=h("$ZodCheckMinLength",(e,t)=>{var r;le.init(e,t),(r=e._zod.def).when??(r.when=o=>{let n=o.value;return!Yt(n)&&n.length!==void 0}),e._zod.onattach.push(o=>{let n=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(o._zod.bag.minimum=t.minimum)}),e._zod.check=o=>{let n=o.value;if(n.length>=t.minimum)return;let i=Xt(n);o.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),mc=h("$ZodCheckLengthEquals",(e,t)=>{var r;le.init(e,t),(r=e._zod.def).when??(r.when=o=>{let n=o.value;return!Yt(n)&&n.length!==void 0}),e._zod.onattach.push(o=>{let n=o._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=o=>{let n=o.value,s=n.length;if(s===t.length)return;let i=Xt(n),a=s>t.length;o.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!t.abort})}}),tr=h("$ZodCheckStringFormat",(e,t)=>{var r,o;le.init(e,t),e._zod.onattach.push(n=>{let s=n._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=e._zod).check??(o.check=()=>{})}),hc=h("$ZodCheckRegex",(e,t)=>{tr.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),gc=h("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=ac),tr.init(e,t)}),_c=h("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=cc),tr.init(e,t)}),yc=h("$ZodCheckIncludes",(e,t)=>{le.init(e,t);let r=Xe(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=o,e._zod.onattach.push(n=>{let s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(o)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),vc=h("$ZodCheckStartsWith",(e,t)=>{le.init(e,t);let r=new RegExp(`^${Xe(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(o=>{let n=o._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),e._zod.check=o=>{o.value.startsWith(t.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:o.value,inst:e,continue:!t.abort})}}),$c=h("$ZodCheckEndsWith",(e,t)=>{le.init(e,t);let r=new RegExp(`.*${Xe(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(o=>{let n=o._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),e._zod.check=o=>{o.value.endsWith(t.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:o.value,inst:e,continue:!t.abort})}});var bc=h("$ZodCheckOverwrite",(e,t)=>{le.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});var eo=class{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}let o=t.split(`
`).filter(i=>i),n=Math.min(...o.map(i=>i.length-i.trimStart().length)),s=o.map(i=>i.slice(n)).map(i=>" ".repeat(this.indent*2)+i);for(let i of s)this.content.push(i)}compile(){let t=Function,r=this?.args,n=[...(this?.content??[""]).map(s=>`  ${s}`)];return new t(...r,n.join(`
`))}};var xc={major:4,minor:0,patch:0};var K=h("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=xc;let o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(let n of o)for(let s of n._zod.onattach)s(e);if(o.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let n=(s,i,a)=>{let c=pt(s),u;for(let l of i){if(l._zod.def.when){if(!l._zod.def.when(s))continue}else if(c)continue;let d=s.issues.length,f=l._zod.check(s);if(f instanceof Promise&&a?.async===!1)throw new Ke;if(u||f instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await f,s.issues.length!==d&&(c||(c=pt(s,d)))});else{if(s.issues.length===d)continue;c||(c=pt(s,d))}}return u?u.then(()=>s):s};e._zod.run=(s,i)=>{let a=e._zod.parse(s,i);if(a instanceof Promise){if(i.async===!1)throw new Ke;return a.then(c=>n(c,o,i))}return n(a,o,i)}}e["~standard"]={validate:n=>{try{let s=er(e,n);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return Xr(e,n).then(i=>i.success?{value:i.data}:{issues:i.error?.issues})}},vendor:"zod",version:1}}),ro=h("$ZodString",(e,t)=>{K.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??rc(e._zod.bag),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),G=h("$ZodStringFormat",(e,t)=>{tr.init(e,t),ro.init(e,t)}),Oc=h("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=La),G.init(e,t)}),jc=h("$ZodUUID",(e,t)=>{if(t.version){let o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(o===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=On(o))}else t.pattern??(t.pattern=On());G.init(e,t)}),Zc=h("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Ua),G.init(e,t)}),Cc=h("$ZodURL",(e,t)=>{G.init(e,t),e._zod.check=r=>{try{let o=r.value,n=new URL(o),s=n.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Ja.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!o.endsWith("/")&&s.endsWith("/")?r.value=s.slice(0,-1):r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Ac=h("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Fa()),G.init(e,t)}),qc=h("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Da),G.init(e,t)}),Dc=h("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=ja),G.init(e,t)}),Mc=h("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Za),G.init(e,t)}),Lc=h("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Ca),G.init(e,t)}),Uc=h("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Aa),G.init(e,t)}),Fc=h("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=qa),G.init(e,t)}),Vc=h("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=tc(t)),G.init(e,t)}),Hc=h("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Qa),G.init(e,t)}),Kc=h("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=ec(t)),G.init(e,t)}),Bc=h("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Ma),G.init(e,t)}),Gc=h("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Va),G.init(e,t),e._zod.onattach.push(r=>{let o=r._zod.bag;o.format="ipv4"})}),Jc=h("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ha),G.init(e,t),e._zod.onattach.push(r=>{let o=r._zod.bag;o.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Wc=h("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ka),G.init(e,t)}),Yc=h("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Ba),G.init(e,t),e._zod.check=r=>{let[o,n]=r.value.split("/");try{if(!n)throw new Error;let s=Number(n);if(`${s}`!==n)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${o}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Qc(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}var Xc=h("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Ga),G.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Qc(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function pm(e){if(!jn.test(e))return!1;let t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Qc(r)}var eu=h("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=jn),G.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{pm(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),tu=h("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Wa),G.init(e,t)});function fm(e,t=null){try{let r=e.split(".");if(r.length!==3)return!1;let[o]=r;if(!o)return!1;let n=JSON.parse(atob(o));return!("typ"in n&&n?.typ!=="JWT"||!n.alg||t&&(!("alg"in n)||n.alg!==t))}catch{return!1}}var ru=h("$ZodJWT",(e,t)=>{G.init(e,t),e._zod.check=r=>{fm(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}});var Dn=h("$ZodNumber",(e,t)=>{K.init(e,t),e._zod.pattern=e._zod.bag.pattern??nc,e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}let n=r.value;if(typeof n=="number"&&!Number.isNaN(n)&&Number.isFinite(n))return r;let s=typeof n=="number"?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:n,inst:e,...s?{received:s}:{}}),r}}),ou=h("$ZodNumber",(e,t)=>{dc.init(e,t),Dn.init(e,t)}),nu=h("$ZodBoolean",(e,t)=>{K.init(e,t),e._zod.pattern=sc,e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=!!r.value}catch{}let n=r.value;return typeof n=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:e}),r}});var su=h("$ZodNull",(e,t)=>{K.init(e,t),e._zod.pattern=ic,e._zod.values=new Set([null]),e._zod.parse=(r,o)=>{let n=r.value;return n===null||r.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),r}});var iu=h("$ZodUnknown",(e,t)=>{K.init(e,t),e._zod.parse=r=>r}),au=h("$ZodNever",(e,t)=>{K.init(e,t),e._zod.parse=(r,o)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function wc(e,t,r){e.issues.length&&t.issues.push(...De(r,e.issues)),t.value[r]=e.value}var cu=h("$ZodArray",(e,t)=>{K.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),r;r.value=Array(n.length);let s=[];for(let i=0;i<n.length;i++){let a=n[i],c=t.element._zod.run({value:a,issues:[]},o);c instanceof Promise?s.push(c.then(u=>wc(u,r,i))):wc(c,r,i)}return s.length?Promise.all(s).then(()=>r):r}});function to(e,t,r){e.issues.length&&t.issues.push(...De(r,e.issues)),t.value[r]=e.value}function kc(e,t,r,o){e.issues.length?o[r]===void 0?r in o?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...De(r,e.issues)):e.value===void 0?r in o&&(t.value[r]=void 0):t.value[r]=e.value}var uu=h("$ZodObject",(e,t)=>{K.init(e,t);let r=Wt(()=>{let d=Object.keys(t.shape);for(let m of d)if(!(t.shape[m]instanceof K))throw new Error(`Invalid element at key "${m}": expected a Zod schema`);let f=Pn(t.shape);return{shape:t.shape,keys:d,keySet:new Set(d),numKeys:d.length,optionalKeys:new Set(f)}});H(e._zod,"propValues",()=>{let d=t.shape,f={};for(let m in d){let g=d[m]._zod;if(g.values){f[m]??(f[m]=new Set);for(let _ of g.values)f[m].add(_)}}return f});let o=d=>{let f=new eo(["shape","payload","ctx"]),m=r.value,g=z=>{let $=dt(z);return`shape[${$}]._zod.run({ value: input[${$}], issues: [] }, ctx)`};f.write("const input = payload.value;");let _=Object.create(null),y=0;for(let z of m.keys)_[z]=`key_${y++}`;f.write("const newResult = {}");for(let z of m.keys)if(m.optionalKeys.has(z)){let $=_[z];f.write(`const ${$} = ${g(z)};`);let S=dt(z);f.write(`
        if (${$}.issues.length) {
          if (input[${S}] === undefined) {
            if (${S} in input) {
              newResult[${S}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${$}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${S}, ...iss.path] : [${S}],
              }))
            );
          }
        } else if (${$}.value === undefined) {
          if (${S} in input) newResult[${S}] = undefined;
        } else {
          newResult[${S}] = ${$}.value;
        }
        `)}else{let $=_[z];f.write(`const ${$} = ${g(z)};`),f.write(`
          if (${$}.issues.length) payload.issues = payload.issues.concat(${$}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${dt(z)}, ...iss.path] : [${dt(z)}]
          })));`),f.write(`newResult[${dt(z)}] = ${$}.value`)}f.write("payload.value = newResult;"),f.write("return payload;");let v=f.compile();return(z,$)=>v(d,z,$)},n,s=kt,i=!Gr.jitless,c=i&&kn.value,u=t.catchall,l;e._zod.parse=(d,f)=>{l??(l=r.value);let m=d.value;if(!s(m))return d.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),d;let g=[];if(i&&c&&f?.async===!1&&f.jitless!==!0)n||(n=o(t.shape)),d=n(d,f);else{d.value={};let $=l.shape;for(let S of l.keys){let E=$[S],me=E._zod.run({value:m[S],issues:[]},f),we=E._zod.optin==="optional"&&E._zod.optout==="optional";me instanceof Promise?g.push(me.then(wt=>we?kc(wt,d,S,m):to(wt,d,S))):we?kc(me,d,S,m):to(me,d,S)}}if(!u)return g.length?Promise.all(g).then(()=>d):d;let _=[],y=l.keySet,v=u._zod,z=v.def.type;for(let $ of Object.keys(m)){if(y.has($))continue;if(z==="never"){_.push($);continue}let S=v.run({value:m[$],issues:[]},f);S instanceof Promise?g.push(S.then(E=>to(E,d,$))):to(S,d,$)}return _.length&&d.issues.push({code:"unrecognized_keys",keys:_,input:m,inst:e}),g.length?Promise.all(g).then(()=>d):d}});function Sc(e,t,r,o){for(let n of e)if(n.issues.length===0)return t.value=n.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(n=>n.issues.map(s=>Ne(s,o,ke())))}),t}var Mn=h("$ZodUnion",(e,t)=>{K.init(e,t),H(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),H(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),H(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),H(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){let r=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${r.map(o=>Qt(o.source)).join("|")})$`)}}),e._zod.parse=(r,o)=>{let n=!1,s=[];for(let i of t.options){let a=i._zod.run({value:r.value,issues:[]},o);if(a instanceof Promise)s.push(a),n=!0;else{if(a.issues.length===0)return a;s.push(a)}}return n?Promise.all(s).then(i=>Sc(i,r,e,o)):Sc(s,r,e,o)}}),lu=h("$ZodDiscriminatedUnion",(e,t)=>{Mn.init(e,t);let r=e._zod.parse;H(e._zod,"propValues",()=>{let n={};for(let s of t.options){let i=s._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(let[a,c]of Object.entries(i)){n[a]||(n[a]=new Set);for(let u of c)n[a].add(u)}}return n});let o=Wt(()=>{let n=t.options,s=new Map;for(let i of n){let a=i._zod.propValues[t.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(let c of a){if(s.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);s.set(c,i)}}return s});e._zod.parse=(n,s)=>{let i=n.value;if(!kt(i))return n.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),n;let a=o.value.get(i?.[t.discriminator]);return a?a._zod.run(n,s):t.unionFallback?r(n,s):(n.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:i,path:[t.discriminator],inst:e}),n)}}),du=h("$ZodIntersection",(e,t)=>{K.init(e,t),e._zod.parse=(r,o)=>{let n=r.value,s=t.left._zod.run({value:n,issues:[]},o),i=t.right._zod.run({value:n,issues:[]},o);return s instanceof Promise||i instanceof Promise?Promise.all([s,i]).then(([c,u])=>Pc(r,c,u)):Pc(r,s,i)}});function qn(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(St(e)&&St(t)){let r=Object.keys(t),o=Object.keys(e).filter(s=>r.indexOf(s)!==-1),n={...e,...t};for(let s of o){let i=qn(e[s],t[s]);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};n[s]=i.data}return{valid:!0,data:n}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let o=0;o<e.length;o++){let n=e[o],s=t[o],i=qn(n,s);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Pc(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),pt(e))return e;let o=qn(t.value,r.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}var pu=h("$ZodRecord",(e,t)=>{K.init(e,t),e._zod.parse=(r,o)=>{let n=r.value;if(!St(n))return r.issues.push({expected:"record",code:"invalid_type",input:n,inst:e}),r;let s=[];if(t.keyType._zod.values){let i=t.keyType._zod.values;r.value={};for(let c of i)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){let u=t.valueType._zod.run({value:n[c],issues:[]},o);u instanceof Promise?s.push(u.then(l=>{l.issues.length&&r.issues.push(...De(c,l.issues)),r.value[c]=l.value})):(u.issues.length&&r.issues.push(...De(c,u.issues)),r.value[c]=u.value)}let a;for(let c in n)i.has(c)||(a=a??[],a.push(c));a&&a.length>0&&r.issues.push({code:"unrecognized_keys",input:n,inst:e,keys:a})}else{r.value={};for(let i of Reflect.ownKeys(n)){if(i==="__proto__")continue;let a=t.keyType._zod.run({value:i,issues:[]},o);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(u=>Ne(u,o,ke())),input:i,path:[i],inst:e}),r.value[a.value]=a.value;continue}let c=t.valueType._zod.run({value:n[i],issues:[]},o);c instanceof Promise?s.push(c.then(u=>{u.issues.length&&r.issues.push(...De(i,u.issues)),r.value[a.value]=u.value})):(c.issues.length&&r.issues.push(...De(i,c.issues)),r.value[a.value]=c.value)}}return s.length?Promise.all(s).then(()=>r):r}});var fu=h("$ZodEnum",(e,t)=>{K.init(e,t);let r=bn(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(o=>Sn.has(typeof o)).map(o=>typeof o=="string"?Xe(o):o.toString()).join("|")})$`),e._zod.parse=(o,n)=>{let s=o.value;return e._zod.values.has(s)||o.issues.push({code:"invalid_value",values:r,input:s,inst:e}),o}}),mu=h("$ZodLiteral",(e,t)=>{K.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?Xe(r):r?r.toString():String(r)).join("|")})$`),e._zod.parse=(r,o)=>{let n=r.value;return e._zod.values.has(n)||r.issues.push({code:"invalid_value",values:t.values,input:n,inst:e}),r}});var hu=h("$ZodTransform",(e,t)=>{K.init(e,t),e._zod.parse=(r,o)=>{let n=t.transform(r.value,r);if(o.async)return(n instanceof Promise?n:Promise.resolve(n)).then(i=>(r.value=i,r));if(n instanceof Promise)throw new Ke;return r.value=n,r}}),gu=h("$ZodOptional",(e,t)=>{K.init(e,t),e._zod.optin="optional",e._zod.optout="optional",H(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),H(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${Qt(r.source)})?$`):void 0}),e._zod.parse=(r,o)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,o):r.value===void 0?r:t.innerType._zod.run(r,o)}),_u=h("$ZodNullable",(e,t)=>{K.init(e,t),H(e._zod,"optin",()=>t.innerType._zod.optin),H(e._zod,"optout",()=>t.innerType._zod.optout),H(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${Qt(r.source)}|null)$`):void 0}),H(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,o)=>r.value===null?r:t.innerType._zod.run(r,o)}),yu=h("$ZodDefault",(e,t)=>{K.init(e,t),e._zod.optin="optional",H(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>{if(r.value===void 0)return r.value=t.defaultValue,r;let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(s=>Ec(s,t)):Ec(n,t)}});function Ec(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}var vu=h("$ZodPrefault",(e,t)=>{K.init(e,t),e._zod.optin="optional",H(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,o))}),$u=h("$ZodNonOptional",(e,t)=>{K.init(e,t),H(e._zod,"values",()=>{let r=t.innerType._zod.values;return r?new Set([...r].filter(o=>o!==void 0)):void 0}),e._zod.parse=(r,o)=>{let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(s=>Tc(s,e)):Tc(n,e)}});function Tc(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var bu=h("$ZodCatch",(e,t)=>{K.init(e,t),e._zod.optin="optional",H(e._zod,"optout",()=>t.innerType._zod.optout),H(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,o)=>{let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(s=>(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(i=>Ne(i,o,ke()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=t.catchValue({...r,error:{issues:n.issues.map(s=>Ne(s,o,ke()))},input:r.value}),r.issues=[]),r)}});var zu=h("$ZodPipe",(e,t)=>{K.init(e,t),H(e._zod,"values",()=>t.in._zod.values),H(e._zod,"optin",()=>t.in._zod.optin),H(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(r,o)=>{let n=t.in._zod.run(r,o);return n instanceof Promise?n.then(s=>Ic(s,t,o)):Ic(n,t,o)}});function Ic(e,t,r){return pt(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}var xu=h("$ZodReadonly",(e,t)=>{K.init(e,t),H(e._zod,"propValues",()=>t.innerType._zod.propValues),H(e._zod,"values",()=>t.innerType._zod.values),H(e._zod,"optin",()=>t.innerType._zod.optin),H(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,o)=>{let n=t.innerType._zod.run(r,o);return n instanceof Promise?n.then(Rc):Rc(n)}});function Rc(e){return e.value=Object.freeze(e.value),e}var wu=h("$ZodCustom",(e,t)=>{le.init(e,t),K.init(e,t),e._zod.parse=(r,o)=>r,e._zod.check=r=>{let o=r.value,n=t.fn(o);if(n instanceof Promise)return n.then(s=>Nc(s,r,o,e));Nc(n,r,o,e)}});function Nc(e,t,r,o){if(!e){let n={code:"custom",input:r,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(n.params=o._zod.def.params),t.issues.push(Tn(n))}}var mm=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},hm=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(o){return e[o]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Invalid input: expected ${o.expected}, received ${mm(o.input)}`;case"invalid_value":return o.values.length===1?`Invalid input: expected ${Yr(o.values[0])}`:`Invalid option: expected one of ${Jr(o.values,"|")}`;case"too_big":{let n=o.inclusive?"<=":"<",s=t(o.origin);return s?`Too big: expected ${o.origin??"value"} to have ${n}${o.maximum.toString()} ${s.unit??"elements"}`:`Too big: expected ${o.origin??"value"} to be ${n}${o.maximum.toString()}`}case"too_small":{let n=o.inclusive?">=":">",s=t(o.origin);return s?`Too small: expected ${o.origin} to have ${n}${o.minimum.toString()} ${s.unit}`:`Too small: expected ${o.origin} to be ${n}${o.minimum.toString()}`}case"invalid_format":{let n=o;return n.format==="starts_with"?`Invalid string: must start with "${n.prefix}"`:n.format==="ends_with"?`Invalid string: must end with "${n.suffix}"`:n.format==="includes"?`Invalid string: must include "${n.includes}"`:n.format==="regex"?`Invalid string: must match pattern ${n.pattern}`:`Invalid ${r[n.format]??o.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${o.divisor}`;case"unrecognized_keys":return`Unrecognized key${o.keys.length>1?"s":""}: ${Jr(o.keys,", ")}`;case"invalid_key":return`Invalid key in ${o.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${o.origin}`;default:return"Invalid input"}}};function ku(){return{localeError:hm()}}var Ln=class{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){let o=r[0];if(this._map.set(t,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){let r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){let r=t._zod.parent;if(r){let o={...this.get(r)??{}};return delete o.id,{...o,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}};function gm(){return new Ln}var rr=gm();function Su(e,t){return new e({type:"string",...P(t)})}function Pu(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...P(t)})}function Un(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...P(t)})}function Eu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...P(t)})}function Tu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...P(t)})}function Iu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...P(t)})}function Ru(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...P(t)})}function Nu(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...P(t)})}function Ou(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...P(t)})}function ju(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...P(t)})}function Zu(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...P(t)})}function Cu(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...P(t)})}function Au(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...P(t)})}function qu(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...P(t)})}function Du(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...P(t)})}function Mu(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...P(t)})}function Lu(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...P(t)})}function Uu(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...P(t)})}function Fu(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...P(t)})}function Vu(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...P(t)})}function Hu(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...P(t)})}function Ku(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...P(t)})}function Bu(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...P(t)})}function Gu(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...P(t)})}function Ju(e,t){return new e({type:"string",format:"date",check:"string_format",...P(t)})}function Wu(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...P(t)})}function Yu(e,t){return new e({type:"string",format:"duration",check:"string_format",...P(t)})}function Qu(e,t){return new e({type:"number",checks:[],...P(t)})}function Xu(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...P(t)})}function el(e,t){return new e({type:"boolean",...P(t)})}function tl(e,t){return new e({type:"null",...P(t)})}function rl(e){return new e({type:"unknown"})}function ol(e,t){return new e({type:"never",...P(t)})}function oo(e,t){return new Cn({check:"less_than",...P(t),value:e,inclusive:!1})}function or(e,t){return new Cn({check:"less_than",...P(t),value:e,inclusive:!0})}function no(e,t){return new An({check:"greater_than",...P(t),value:e,inclusive:!1})}function nr(e,t){return new An({check:"greater_than",...P(t),value:e,inclusive:!0})}function so(e,t){return new lc({check:"multiple_of",...P(t),value:e})}function io(e,t){return new pc({check:"max_length",...P(t),maximum:e})}function Pt(e,t){return new fc({check:"min_length",...P(t),minimum:e})}function ao(e,t){return new mc({check:"length_equals",...P(t),length:e})}function Fn(e,t){return new hc({check:"string_format",format:"regex",...P(t),pattern:e})}function Vn(e){return new gc({check:"string_format",format:"lowercase",...P(e)})}function Hn(e){return new _c({check:"string_format",format:"uppercase",...P(e)})}function Kn(e,t){return new yc({check:"string_format",format:"includes",...P(t),includes:e})}function Bn(e,t){return new vc({check:"string_format",format:"starts_with",...P(t),prefix:e})}function Gn(e,t){return new $c({check:"string_format",format:"ends_with",...P(t),suffix:e})}function ft(e){return new bc({check:"overwrite",tx:e})}function Jn(e){return ft(t=>t.normalize(e))}function Wn(){return ft(e=>e.trim())}function Yn(){return ft(e=>e.toLowerCase())}function Qn(){return ft(e=>e.toUpperCase())}function nl(e,t,r){return new e({type:"array",element:t,...P(r)})}function sl(e,t,r){let o=P(r);return o.abort??(o.abort=!0),new e({type:"custom",check:"custom",fn:t,...o})}function il(e,t,r){return new e({type:"custom",check:"custom",fn:t,...P(r)})}function Et(e){return!!e._zod}function et(e,t){return Et(e)?er(e,t):e.safeParse(t)}function co(e){if(!e)return;let t;if(Et(e)?t=e._zod?.def?.shape:t=e.shape,!!t){if(typeof t=="function")try{return t()}catch{return}return t}}function al(e){if(Et(e)){let s=e._zod?.def;if(s){if(s.value!==void 0)return s.value;if(Array.isArray(s.values)&&s.values.length>0)return s.values[0]}}let r=e._def;if(r){if(r.value!==void 0)return r.value;if(Array.isArray(r.values)&&r.values.length>0)return r.values[0]}let o=e.value;if(o!==void 0)return o}var ir={};wa(ir,{ZodISODate:()=>ul,ZodISODateTime:()=>cl,ZodISODuration:()=>dl,ZodISOTime:()=>ll,date:()=>es,datetime:()=>Xn,duration:()=>rs,time:()=>ts});var cl=h("ZodISODateTime",(e,t)=>{Vc.init(e,t),Y.init(e,t)});function Xn(e){return Gu(cl,e)}var ul=h("ZodISODate",(e,t)=>{Hc.init(e,t),Y.init(e,t)});function es(e){return Ju(ul,e)}var ll=h("ZodISOTime",(e,t)=>{Kc.init(e,t),Y.init(e,t)});function ts(e){return Wu(ll,e)}var dl=h("ZodISODuration",(e,t)=>{Bc.init(e,t),Y.init(e,t)});function rs(e){return Yu(dl,e)}var pl=(e,t)=>{Qr.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Ra(e,r)},flatten:{value:r=>Ia(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},Mz=h("ZodError",pl),ar=h("ZodError",pl,{Parent:Error});var fl=Na(ar),ml=Oa(ar),hl=Rn(ar),gl=Nn(ar);var te=h("ZodType",(e,t)=>(K.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]}),e.clone=(r,o)=>qe(e,r,o),e.brand=()=>e,e.register=((r,o)=>(r.add(e,o),e)),e.parse=(r,o)=>fl(e,r,o,{callee:e.parse}),e.safeParse=(r,o)=>hl(e,r,o),e.parseAsync=async(r,o)=>ml(e,r,o,{callee:e.parseAsync}),e.safeParseAsync=async(r,o)=>gl(e,r,o),e.spa=e.safeParseAsync,e.refine=(r,o)=>e.check(fh(r,o)),e.superRefine=r=>e.check(mh(r)),e.overwrite=r=>e.check(ft(r)),e.optional=()=>ee(e),e.nullable=()=>vl(e),e.nullish=()=>ee(vl(e)),e.nonoptional=r=>ih(e,r),e.array=()=>Z(e),e.or=r=>B([e,r]),e.and=r=>lo(e,r),e.transform=r=>ns(e,wl(r)),e.default=r=>oh(e,r),e.prefault=r=>sh(e,r),e.catch=r=>ch(e,r),e.pipe=r=>ns(e,r),e.readonly=()=>dh(e),e.describe=r=>{let o=e.clone();return rr.add(o,{description:r}),o},Object.defineProperty(e,"description",{get(){return rr.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return rr.get(e);let o=e.clone();return rr.add(o,r[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),$l=h("_ZodString",(e,t)=>{ro.init(e,t),te.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...o)=>e.check(Fn(...o)),e.includes=(...o)=>e.check(Kn(...o)),e.startsWith=(...o)=>e.check(Bn(...o)),e.endsWith=(...o)=>e.check(Gn(...o)),e.min=(...o)=>e.check(Pt(...o)),e.max=(...o)=>e.check(io(...o)),e.length=(...o)=>e.check(ao(...o)),e.nonempty=(...o)=>e.check(Pt(1,...o)),e.lowercase=o=>e.check(Vn(o)),e.uppercase=o=>e.check(Hn(o)),e.trim=()=>e.check(Wn()),e.normalize=(...o)=>e.check(Jn(...o)),e.toLowerCase=()=>e.check(Yn()),e.toUpperCase=()=>e.check(Qn())}),km=h("ZodString",(e,t)=>{ro.init(e,t),$l.init(e,t),e.email=r=>e.check(Pu(Sm,r)),e.url=r=>e.check(Nu(Pm,r)),e.jwt=r=>e.check(Bu(Um,r)),e.emoji=r=>e.check(Ou(Em,r)),e.guid=r=>e.check(Un(_l,r)),e.uuid=r=>e.check(Eu(uo,r)),e.uuidv4=r=>e.check(Tu(uo,r)),e.uuidv6=r=>e.check(Iu(uo,r)),e.uuidv7=r=>e.check(Ru(uo,r)),e.nanoid=r=>e.check(ju(Tm,r)),e.guid=r=>e.check(Un(_l,r)),e.cuid=r=>e.check(Zu(Im,r)),e.cuid2=r=>e.check(Cu(Rm,r)),e.ulid=r=>e.check(Au(Nm,r)),e.base64=r=>e.check(Vu(Dm,r)),e.base64url=r=>e.check(Hu(Mm,r)),e.xid=r=>e.check(qu(Om,r)),e.ksuid=r=>e.check(Du(jm,r)),e.ipv4=r=>e.check(Mu(Zm,r)),e.ipv6=r=>e.check(Lu(Cm,r)),e.cidrv4=r=>e.check(Uu(Am,r)),e.cidrv6=r=>e.check(Fu(qm,r)),e.e164=r=>e.check(Ku(Lm,r)),e.datetime=r=>e.check(Xn(r)),e.date=r=>e.check(es(r)),e.time=r=>e.check(ts(r)),e.duration=r=>e.check(rs(r))});function p(e){return Su(km,e)}var Y=h("ZodStringFormat",(e,t)=>{G.init(e,t),$l.init(e,t)}),Sm=h("ZodEmail",(e,t)=>{Zc.init(e,t),Y.init(e,t)});var _l=h("ZodGUID",(e,t)=>{Oc.init(e,t),Y.init(e,t)});var uo=h("ZodUUID",(e,t)=>{jc.init(e,t),Y.init(e,t)});var Pm=h("ZodURL",(e,t)=>{Cc.init(e,t),Y.init(e,t)});var Em=h("ZodEmoji",(e,t)=>{Ac.init(e,t),Y.init(e,t)});var Tm=h("ZodNanoID",(e,t)=>{qc.init(e,t),Y.init(e,t)});var Im=h("ZodCUID",(e,t)=>{Dc.init(e,t),Y.init(e,t)});var Rm=h("ZodCUID2",(e,t)=>{Mc.init(e,t),Y.init(e,t)});var Nm=h("ZodULID",(e,t)=>{Lc.init(e,t),Y.init(e,t)});var Om=h("ZodXID",(e,t)=>{Uc.init(e,t),Y.init(e,t)});var jm=h("ZodKSUID",(e,t)=>{Fc.init(e,t),Y.init(e,t)});var Zm=h("ZodIPv4",(e,t)=>{Gc.init(e,t),Y.init(e,t)});var Cm=h("ZodIPv6",(e,t)=>{Jc.init(e,t),Y.init(e,t)});var Am=h("ZodCIDRv4",(e,t)=>{Wc.init(e,t),Y.init(e,t)});var qm=h("ZodCIDRv6",(e,t)=>{Yc.init(e,t),Y.init(e,t)});var Dm=h("ZodBase64",(e,t)=>{Xc.init(e,t),Y.init(e,t)});var Mm=h("ZodBase64URL",(e,t)=>{eu.init(e,t),Y.init(e,t)});var Lm=h("ZodE164",(e,t)=>{tu.init(e,t),Y.init(e,t)});var Um=h("ZodJWT",(e,t)=>{ru.init(e,t),Y.init(e,t)});var bl=h("ZodNumber",(e,t)=>{Dn.init(e,t),te.init(e,t),e.gt=(o,n)=>e.check(no(o,n)),e.gte=(o,n)=>e.check(nr(o,n)),e.min=(o,n)=>e.check(nr(o,n)),e.lt=(o,n)=>e.check(oo(o,n)),e.lte=(o,n)=>e.check(or(o,n)),e.max=(o,n)=>e.check(or(o,n)),e.int=o=>e.check(yl(o)),e.safe=o=>e.check(yl(o)),e.positive=o=>e.check(no(0,o)),e.nonnegative=o=>e.check(nr(0,o)),e.negative=o=>e.check(oo(0,o)),e.nonpositive=o=>e.check(or(0,o)),e.multipleOf=(o,n)=>e.check(so(o,n)),e.step=(o,n)=>e.check(so(o,n)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function U(e){return Qu(bl,e)}var Fm=h("ZodNumberFormat",(e,t)=>{ou.init(e,t),bl.init(e,t)});function yl(e){return Xu(Fm,e)}var Vm=h("ZodBoolean",(e,t)=>{nu.init(e,t),te.init(e,t)});function oe(e){return el(Vm,e)}var Hm=h("ZodNull",(e,t)=>{su.init(e,t),te.init(e,t)});function ss(e){return tl(Hm,e)}var Km=h("ZodUnknown",(e,t)=>{iu.init(e,t),te.init(e,t)});function Q(){return rl(Km)}var Bm=h("ZodNever",(e,t)=>{au.init(e,t),te.init(e,t)});function Gm(e){return ol(Bm,e)}var Jm=h("ZodArray",(e,t)=>{cu.init(e,t),te.init(e,t),e.element=t.element,e.min=(r,o)=>e.check(Pt(r,o)),e.nonempty=r=>e.check(Pt(1,r)),e.max=(r,o)=>e.check(io(r,o)),e.length=(r,o)=>e.check(ao(r,o)),e.unwrap=()=>e.element});function Z(e,t){return nl(Jm,e,t)}var zl=h("ZodObject",(e,t)=>{uu.init(e,t),te.init(e,t),L.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>ye(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Q()}),e.loose=()=>e.clone({...e._zod.def,catchall:Q()}),e.strict=()=>e.clone({...e._zod.def,catchall:Gm()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>L.extend(e,r),e.merge=r=>L.merge(e,r),e.pick=r=>L.pick(e,r),e.omit=r=>L.omit(e,r),e.partial=(...r)=>L.partial(kl,e,r[0]),e.required=(...r)=>L.required(Sl,e,r[0])});function x(e,t){let r={type:"object",get shape(){return L.assignProp(this,"shape",{...e}),this.shape},...L.normalizeParams(t)};return new zl(r)}function he(e,t){return new zl({type:"object",get shape(){return L.assignProp(this,"shape",{...e}),this.shape},catchall:Q(),...L.normalizeParams(t)})}var xl=h("ZodUnion",(e,t)=>{Mn.init(e,t),te.init(e,t),e.options=t.options});function B(e,t){return new xl({type:"union",options:e,...L.normalizeParams(t)})}var Wm=h("ZodDiscriminatedUnion",(e,t)=>{xl.init(e,t),lu.init(e,t)});function is(e,t,r){return new Wm({type:"union",options:t,discriminator:e,...L.normalizeParams(r)})}var Ym=h("ZodIntersection",(e,t)=>{du.init(e,t),te.init(e,t)});function lo(e,t){return new Ym({type:"intersection",left:e,right:t})}var Qm=h("ZodRecord",(e,t)=>{pu.init(e,t),te.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function X(e,t,r){return new Qm({type:"record",keyType:e,valueType:t,...L.normalizeParams(r)})}var os=h("ZodEnum",(e,t)=>{fu.init(e,t),te.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(o,n)=>{let s={};for(let i of o)if(r.has(i))s[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new os({...t,checks:[],...L.normalizeParams(n),entries:s})},e.exclude=(o,n)=>{let s={...t.entries};for(let i of o)if(r.has(i))delete s[i];else throw new Error(`Key ${i} not found in enum`);return new os({...t,checks:[],...L.normalizeParams(n),entries:s})}});function ye(e,t){let r=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new os({type:"enum",entries:r,...L.normalizeParams(t)})}var Xm=h("ZodLiteral",(e,t)=>{mu.init(e,t),te.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function w(e,t){return new Xm({type:"literal",values:Array.isArray(e)?e:[e],...L.normalizeParams(t)})}var eh=h("ZodTransform",(e,t)=>{hu.init(e,t),te.init(e,t),e._zod.parse=(r,o)=>{r.addIssue=s=>{if(typeof s=="string")r.issues.push(L.issue(s,r.value,t));else{let i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),r.issues.push(L.issue(i))}};let n=t.transform(r.value,r);return n instanceof Promise?n.then(s=>(r.value=s,r)):(r.value=n,r)}});function wl(e){return new eh({type:"transform",transform:e})}var kl=h("ZodOptional",(e,t)=>{gu.init(e,t),te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ee(e){return new kl({type:"optional",innerType:e})}var th=h("ZodNullable",(e,t)=>{_u.init(e,t),te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function vl(e){return new th({type:"nullable",innerType:e})}var rh=h("ZodDefault",(e,t)=>{yu.init(e,t),te.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function oh(e,t){return new rh({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}var nh=h("ZodPrefault",(e,t)=>{vu.init(e,t),te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function sh(e,t){return new nh({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}var Sl=h("ZodNonOptional",(e,t)=>{$u.init(e,t),te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function ih(e,t){return new Sl({type:"nonoptional",innerType:e,...L.normalizeParams(t)})}var ah=h("ZodCatch",(e,t)=>{bu.init(e,t),te.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function ch(e,t){return new ah({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var uh=h("ZodPipe",(e,t)=>{zu.init(e,t),te.init(e,t),e.in=t.in,e.out=t.out});function ns(e,t){return new uh({type:"pipe",in:e,out:t})}var lh=h("ZodReadonly",(e,t)=>{xu.init(e,t),te.init(e,t)});function dh(e){return new lh({type:"readonly",innerType:e})}var Pl=h("ZodCustom",(e,t)=>{wu.init(e,t),te.init(e,t)});function ph(e){let t=new le({check:"custom"});return t._zod.check=e,t}function El(e,t){return sl(Pl,e??(()=>!0),t)}function fh(e,t={}){return il(Pl,e,t)}function mh(e){let t=ph(r=>(r.addIssue=o=>{if(typeof o=="string")r.issues.push(L.issue(o,r.value,t._zod.def));else{let n=o;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),r.issues.push(L.issue(n))}},e(r.value,r)));return t}function as(e,t){return ns(wl(e),t)}ke(ku());var us="2025-11-25";var Tl=[us,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],tt="io.modelcontextprotocol/related-task",fo="2.0",ne=El(e=>e!==null&&(typeof e=="object"||typeof e=="function")),Il=B([p(),U().int()]),Rl=p(),Ox=he({ttl:B([U(),ss()]).optional(),pollInterval:U().optional()}),hh=x({ttl:U().optional()}),gh=x({taskId:p()}),ls=he({progressToken:Il.optional(),[tt]:gh.optional()}),xe=x({_meta:ls.optional()}),cr=xe.extend({task:hh.optional()}),Nl=e=>cr.safeParse(e).success,se=x({method:p(),params:xe.loose().optional()}),Se=x({_meta:ls.optional()}),Pe=x({method:p(),params:Se.loose().optional()}),ie=he({_meta:ls.optional()}),mo=B([p(),U().int()]),Ol=x({jsonrpc:w(fo),id:mo,...se.shape}).strict(),ds=e=>Ol.safeParse(e).success,jl=x({jsonrpc:w(fo),...Pe.shape}).strict(),Zl=e=>jl.safeParse(e).success,ps=x({jsonrpc:w(fo),id:mo,result:ie}).strict(),ur=e=>ps.safeParse(e).success;var C;(function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(C||(C={}));var fs=x({jsonrpc:w(fo),id:mo.optional(),error:x({code:U().int(),message:p(),data:Q().optional()})}).strict();var Cl=e=>fs.safeParse(e).success;var Al=B([Ol,jl,ps,fs]),jx=B([ps,fs]),ho=ie.strict(),_h=Se.extend({requestId:mo.optional(),reason:p().optional()}),go=Pe.extend({method:w("notifications/cancelled"),params:_h}),yh=x({src:p(),mimeType:p().optional(),sizes:Z(p()).optional(),theme:ye(["light","dark"]).optional()}),lr=x({icons:Z(yh).optional()}),Tt=x({name:p(),title:p().optional()}),ql=Tt.extend({...Tt.shape,...lr.shape,version:p(),websiteUrl:p().optional(),description:p().optional()}),vh=lo(x({applyDefaults:oe().optional()}),X(p(),Q())),$h=as(e=>e&&typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0?{form:{}}:e,lo(x({form:vh.optional(),url:ne.optional()}),X(p(),Q()).optional())),bh=he({list:ne.optional(),cancel:ne.optional(),requests:he({sampling:he({createMessage:ne.optional()}).optional(),elicitation:he({create:ne.optional()}).optional()}).optional()}),zh=he({list:ne.optional(),cancel:ne.optional(),requests:he({tools:he({call:ne.optional()}).optional()}).optional()}),xh=x({experimental:X(p(),ne).optional(),sampling:x({context:ne.optional(),tools:ne.optional()}).optional(),elicitation:$h.optional(),roots:x({listChanged:oe().optional()}).optional(),tasks:bh.optional()}),wh=xe.extend({protocolVersion:p(),capabilities:xh,clientInfo:ql}),ms=se.extend({method:w("initialize"),params:wh});var kh=x({experimental:X(p(),ne).optional(),logging:ne.optional(),completions:ne.optional(),prompts:x({listChanged:oe().optional()}).optional(),resources:x({subscribe:oe().optional(),listChanged:oe().optional()}).optional(),tools:x({listChanged:oe().optional()}).optional(),tasks:zh.optional()}),Sh=ie.extend({protocolVersion:p(),capabilities:kh,serverInfo:ql,instructions:p().optional()}),hs=Pe.extend({method:w("notifications/initialized"),params:Se.optional()});var _o=se.extend({method:w("ping"),params:xe.optional()}),Ph=x({progress:U(),total:ee(U()),message:ee(p())}),Eh=x({...Se.shape,...Ph.shape,progressToken:Il}),yo=Pe.extend({method:w("notifications/progress"),params:Eh}),Th=xe.extend({cursor:Rl.optional()}),dr=se.extend({params:Th.optional()}),pr=ie.extend({nextCursor:Rl.optional()}),Ih=ye(["working","input_required","completed","failed","cancelled"]),fr=x({taskId:p(),status:Ih,ttl:B([U(),ss()]),createdAt:p(),lastUpdatedAt:p(),pollInterval:ee(U()),statusMessage:ee(p())}),It=ie.extend({task:fr}),Rh=Se.merge(fr),mr=Pe.extend({method:w("notifications/tasks/status"),params:Rh}),vo=se.extend({method:w("tasks/get"),params:xe.extend({taskId:p()})}),$o=ie.merge(fr),bo=se.extend({method:w("tasks/result"),params:xe.extend({taskId:p()})}),Zx=ie.loose(),zo=dr.extend({method:w("tasks/list")}),xo=pr.extend({tasks:Z(fr)}),wo=se.extend({method:w("tasks/cancel"),params:xe.extend({taskId:p()})}),Dl=ie.merge(fr),Ml=x({uri:p(),mimeType:ee(p()),_meta:X(p(),Q()).optional()}),Ll=Ml.extend({text:p()}),gs=p().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),Ul=Ml.extend({blob:gs}),hr=ye(["user","assistant"]),Rt=x({audience:Z(hr).optional(),priority:U().min(0).max(1).optional(),lastModified:ir.datetime({offset:!0}).optional()}),Fl=x({...Tt.shape,...lr.shape,uri:p(),description:ee(p()),mimeType:ee(p()),annotations:Rt.optional(),_meta:ee(he({}))}),Nh=x({...Tt.shape,...lr.shape,uriTemplate:p(),description:ee(p()),mimeType:ee(p()),annotations:Rt.optional(),_meta:ee(he({}))}),Oh=dr.extend({method:w("resources/list")}),jh=pr.extend({resources:Z(Fl)}),Zh=dr.extend({method:w("resources/templates/list")}),Ch=pr.extend({resourceTemplates:Z(Nh)}),_s=xe.extend({uri:p()}),Ah=_s,qh=se.extend({method:w("resources/read"),params:Ah}),Dh=ie.extend({contents:Z(B([Ll,Ul]))}),Mh=Pe.extend({method:w("notifications/resources/list_changed"),params:Se.optional()}),Lh=_s,Uh=se.extend({method:w("resources/subscribe"),params:Lh}),Fh=_s,Vh=se.extend({method:w("resources/unsubscribe"),params:Fh}),Hh=Se.extend({uri:p()}),Kh=Pe.extend({method:w("notifications/resources/updated"),params:Hh}),Bh=x({name:p(),description:ee(p()),required:ee(oe())}),Gh=x({...Tt.shape,...lr.shape,description:ee(p()),arguments:ee(Z(Bh)),_meta:ee(he({}))}),Jh=dr.extend({method:w("prompts/list")}),Wh=pr.extend({prompts:Z(Gh)}),Yh=xe.extend({name:p(),arguments:X(p(),p()).optional()}),Qh=se.extend({method:w("prompts/get"),params:Yh}),ys=x({type:w("text"),text:p(),annotations:Rt.optional(),_meta:X(p(),Q()).optional()}),vs=x({type:w("image"),data:gs,mimeType:p(),annotations:Rt.optional(),_meta:X(p(),Q()).optional()}),$s=x({type:w("audio"),data:gs,mimeType:p(),annotations:Rt.optional(),_meta:X(p(),Q()).optional()}),Xh=x({type:w("tool_use"),name:p(),id:p(),input:X(p(),Q()),_meta:X(p(),Q()).optional()}),eg=x({type:w("resource"),resource:B([Ll,Ul]),annotations:Rt.optional(),_meta:X(p(),Q()).optional()}),tg=Fl.extend({type:w("resource_link")}),bs=B([ys,vs,$s,tg,eg]),rg=x({role:hr,content:bs}),og=ie.extend({description:p().optional(),messages:Z(rg)}),ng=Pe.extend({method:w("notifications/prompts/list_changed"),params:Se.optional()}),sg=x({title:p().optional(),readOnlyHint:oe().optional(),destructiveHint:oe().optional(),idempotentHint:oe().optional(),openWorldHint:oe().optional()}),ig=x({taskSupport:ye(["required","optional","forbidden"]).optional()}),Vl=x({...Tt.shape,...lr.shape,description:p().optional(),inputSchema:x({type:w("object"),properties:X(p(),ne).optional(),required:Z(p()).optional()}).catchall(Q()),outputSchema:x({type:w("object"),properties:X(p(),ne).optional(),required:Z(p()).optional()}).catchall(Q()).optional(),annotations:sg.optional(),execution:ig.optional(),_meta:X(p(),Q()).optional()}),zs=dr.extend({method:w("tools/list")}),ag=pr.extend({tools:Z(Vl)}),ko=ie.extend({content:Z(bs).default([]),structuredContent:X(p(),Q()).optional(),isError:oe().optional()}),Cx=ko.or(ie.extend({toolResult:Q()})),cg=cr.extend({name:p(),arguments:X(p(),Q()).optional()}),gr=se.extend({method:w("tools/call"),params:cg}),ug=Pe.extend({method:w("notifications/tools/list_changed"),params:Se.optional()}),Ax=x({autoRefresh:oe().default(!0),debounceMs:U().int().nonnegative().default(300)}),_r=ye(["debug","info","notice","warning","error","critical","alert","emergency"]),lg=xe.extend({level:_r}),xs=se.extend({method:w("logging/setLevel"),params:lg}),dg=Se.extend({level:_r,logger:p().optional(),data:Q()}),pg=Pe.extend({method:w("notifications/message"),params:dg}),fg=x({name:p().optional()}),mg=x({hints:Z(fg).optional(),costPriority:U().min(0).max(1).optional(),speedPriority:U().min(0).max(1).optional(),intelligencePriority:U().min(0).max(1).optional()}),hg=x({mode:ye(["auto","required","none"]).optional()}),gg=x({type:w("tool_result"),toolUseId:p().describe("The unique identifier for the corresponding tool call."),content:Z(bs).default([]),structuredContent:x({}).loose().optional(),isError:oe().optional(),_meta:X(p(),Q()).optional()}),_g=is("type",[ys,vs,$s]),po=is("type",[ys,vs,$s,Xh,gg]),yg=x({role:hr,content:B([po,Z(po)]),_meta:X(p(),Q()).optional()}),vg=cr.extend({messages:Z(yg),modelPreferences:mg.optional(),systemPrompt:p().optional(),includeContext:ye(["none","thisServer","allServers"]).optional(),temperature:U().optional(),maxTokens:U().int(),stopSequences:Z(p()).optional(),metadata:ne.optional(),tools:Z(Vl).optional(),toolChoice:hg.optional()}),$g=se.extend({method:w("sampling/createMessage"),params:vg}),ws=ie.extend({model:p(),stopReason:ee(ye(["endTurn","stopSequence","maxTokens"]).or(p())),role:hr,content:_g}),ks=ie.extend({model:p(),stopReason:ee(ye(["endTurn","stopSequence","maxTokens","toolUse"]).or(p())),role:hr,content:B([po,Z(po)])}),bg=x({type:w("boolean"),title:p().optional(),description:p().optional(),default:oe().optional()}),zg=x({type:w("string"),title:p().optional(),description:p().optional(),minLength:U().optional(),maxLength:U().optional(),format:ye(["email","uri","date","date-time"]).optional(),default:p().optional()}),xg=x({type:ye(["number","integer"]),title:p().optional(),description:p().optional(),minimum:U().optional(),maximum:U().optional(),default:U().optional()}),wg=x({type:w("string"),title:p().optional(),description:p().optional(),enum:Z(p()),default:p().optional()}),kg=x({type:w("string"),title:p().optional(),description:p().optional(),oneOf:Z(x({const:p(),title:p()})),default:p().optional()}),Sg=x({type:w("string"),title:p().optional(),description:p().optional(),enum:Z(p()),enumNames:Z(p()).optional(),default:p().optional()}),Pg=B([wg,kg]),Eg=x({type:w("array"),title:p().optional(),description:p().optional(),minItems:U().optional(),maxItems:U().optional(),items:x({type:w("string"),enum:Z(p())}),default:Z(p()).optional()}),Tg=x({type:w("array"),title:p().optional(),description:p().optional(),minItems:U().optional(),maxItems:U().optional(),items:x({anyOf:Z(x({const:p(),title:p()}))}),default:Z(p()).optional()}),Ig=B([Eg,Tg]),Rg=B([Sg,Pg,Ig]),Ng=B([Rg,bg,zg,xg]),Og=cr.extend({mode:w("form").optional(),message:p(),requestedSchema:x({type:w("object"),properties:X(p(),Ng),required:Z(p()).optional()})}),jg=cr.extend({mode:w("url"),message:p(),elicitationId:p(),url:p().url()}),Zg=B([Og,jg]),Cg=se.extend({method:w("elicitation/create"),params:Zg}),Ag=Se.extend({elicitationId:p()}),qg=Pe.extend({method:w("notifications/elicitation/complete"),params:Ag}),So=ie.extend({action:ye(["accept","decline","cancel"]),content:as(e=>e===null?void 0:e,X(p(),B([p(),U(),oe(),Z(p())])).optional())}),Dg=x({type:w("ref/resource"),uri:p()});var Mg=x({type:w("ref/prompt"),name:p()}),Lg=xe.extend({ref:B([Mg,Dg]),argument:x({name:p(),value:p()}),context:x({arguments:X(p(),p()).optional()}).optional()}),Ug=se.extend({method:w("completion/complete"),params:Lg});var Fg=ie.extend({completion:he({values:Z(p()).max(100),total:ee(U().int()),hasMore:ee(oe())})}),Vg=x({uri:p().startsWith("file://"),name:p().optional(),_meta:X(p(),Q()).optional()}),Hg=se.extend({method:w("roots/list"),params:xe.optional()}),Ss=ie.extend({roots:Z(Vg)}),Kg=Pe.extend({method:w("notifications/roots/list_changed"),params:Se.optional()}),qx=B([_o,ms,Ug,xs,Qh,Jh,Oh,Zh,qh,Uh,Vh,gr,zs,vo,bo,zo,wo]),Dx=B([go,yo,hs,Kg,mr]),Mx=B([ho,ws,ks,So,Ss,$o,xo,It]),Lx=B([_o,$g,Cg,Hg,vo,bo,zo,wo]),Ux=B([go,yo,pg,Kh,Mh,ug,ng,mr,qg]),Fx=B([ho,Sh,Fg,og,Wh,jh,Ch,Dh,ko,ag,$o,xo,It]),R=class e extends Error{constructor(t,r,o){super(`MCP error ${t}: ${r}`),this.code=t,this.data=o,this.name="McpError"}static fromError(t,r,o){if(t===C.UrlElicitationRequired&&o){let n=o;if(n.elicitations)return new cs(n.elicitations,r)}return new e(t,r,o)}},cs=class extends R{constructor(t,r=`URL elicitation${t.length>1?"s":""} required`){super(C.UrlElicitationRequired,r,{elicitations:t})}get elicitations(){return this.data?.elicitations??[]}};function rt(e){return e==="completed"||e==="failed"||e==="cancelled"}var zw=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Ps(e){let r=co(e)?.method;if(!r)throw new Error("Schema is missing a method literal");let o=al(r);if(typeof o!="string")throw new Error("Schema method literal must be a string");return o}function Es(e,t){let r=et(e,t);if(!r.success)throw r.error;return r.data}var Qg=6e4,Po=class{constructor(t){this._options=t,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(go,r=>{this._oncancel(r)}),this.setNotificationHandler(yo,r=>{this._onprogress(r)}),this.setRequestHandler(_o,r=>({})),this._taskStore=t?.taskStore,this._taskMessageQueue=t?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(vo,async(r,o)=>{let n=await this._taskStore.getTask(r.params.taskId,o.sessionId);if(!n)throw new R(C.InvalidParams,"Failed to retrieve task: Task not found");return{...n}}),this.setRequestHandler(bo,async(r,o)=>{let n=async()=>{let s=r.params.taskId;if(this._taskMessageQueue){let a;for(;a=await this._taskMessageQueue.dequeue(s,o.sessionId);){if(a.type==="response"||a.type==="error"){let c=a.message,u=c.id,l=this._requestResolvers.get(u);if(l)if(this._requestResolvers.delete(u),a.type==="response")l(c);else{let d=c,f=new R(d.error.code,d.error.message,d.error.data);l(f)}else{let d=a.type==="response"?"Response":"Error";this._onerror(new Error(`${d} handler missing for request ${u}`))}continue}await this._transport?.send(a.message,{relatedRequestId:o.requestId})}}let i=await this._taskStore.getTask(s,o.sessionId);if(!i)throw new R(C.InvalidParams,`Task not found: ${s}`);if(!rt(i.status))return await this._waitForTaskUpdate(s,o.signal),await n();if(rt(i.status)){let a=await this._taskStore.getTaskResult(s,o.sessionId);return this._clearTaskQueue(s),{...a,_meta:{...a._meta,[tt]:{taskId:s}}}}return await n()};return await n()}),this.setRequestHandler(zo,async(r,o)=>{try{let{tasks:n,nextCursor:s}=await this._taskStore.listTasks(r.params?.cursor,o.sessionId);return{tasks:n,nextCursor:s,_meta:{}}}catch(n){throw new R(C.InvalidParams,`Failed to list tasks: ${n instanceof Error?n.message:String(n)}`)}}),this.setRequestHandler(wo,async(r,o)=>{try{let n=await this._taskStore.getTask(r.params.taskId,o.sessionId);if(!n)throw new R(C.InvalidParams,`Task not found: ${r.params.taskId}`);if(rt(n.status))throw new R(C.InvalidParams,`Cannot cancel task in terminal status: ${n.status}`);await this._taskStore.updateTaskStatus(r.params.taskId,"cancelled","Client cancelled task execution.",o.sessionId),this._clearTaskQueue(r.params.taskId);let s=await this._taskStore.getTask(r.params.taskId,o.sessionId);if(!s)throw new R(C.InvalidParams,`Task not found after cancellation: ${r.params.taskId}`);return{_meta:{},...s}}catch(n){throw n instanceof R?n:new R(C.InvalidRequest,`Failed to cancel task: ${n instanceof Error?n.message:String(n)}`)}}))}async _oncancel(t){if(!t.params.requestId)return;this._requestHandlerAbortControllers.get(t.params.requestId)?.abort(t.params.reason)}_setupTimeout(t,r,o,n,s=!1){this._timeoutInfo.set(t,{timeoutId:setTimeout(n,r),startTime:Date.now(),timeout:r,maxTotalTimeout:o,resetTimeoutOnProgress:s,onTimeout:n})}_resetTimeout(t){let r=this._timeoutInfo.get(t);if(!r)return!1;let o=Date.now()-r.startTime;if(r.maxTotalTimeout&&o>=r.maxTotalTimeout)throw this._timeoutInfo.delete(t),R.fromError(C.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:o});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(t){let r=this._timeoutInfo.get(t);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(t))}async connect(t){this._transport=t;let r=this.transport?.onclose;this._transport.onclose=()=>{r?.(),this._onclose()};let o=this.transport?.onerror;this._transport.onerror=s=>{o?.(s),this._onerror(s)};let n=this._transport?.onmessage;this._transport.onmessage=(s,i)=>{n?.(s,i),ur(s)||Cl(s)?this._onresponse(s):ds(s)?this._onrequest(s,i):Zl(s)?this._onnotification(s):this._onerror(new Error(`Unknown message type: ${JSON.stringify(s)}`))},await this._transport.start()}_onclose(){let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();let r=R.fromError(C.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(let o of t.values())o(r)}_onerror(t){this.onerror?.(t)}_onnotification(t){let r=this._notificationHandlers.get(t.method)??this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(t)).catch(o=>this._onerror(new Error(`Uncaught error in notification handler: ${o}`)))}_onrequest(t,r){let o=this._requestHandlers.get(t.method)??this.fallbackRequestHandler,n=this._transport,s=t.params?._meta?.[tt]?.taskId;if(o===void 0){let l={jsonrpc:"2.0",id:t.id,error:{code:C.MethodNotFound,message:"Method not found"}};s&&this._taskMessageQueue?this._enqueueTaskMessage(s,{type:"error",message:l,timestamp:Date.now()},n?.sessionId).catch(d=>this._onerror(new Error(`Failed to enqueue error response: ${d}`))):n?.send(l).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let i=new AbortController;this._requestHandlerAbortControllers.set(t.id,i);let a=Nl(t.params)?t.params.task:void 0,c=this._taskStore?this.requestTaskStore(t,n?.sessionId):void 0,u={signal:i.signal,sessionId:n?.sessionId,_meta:t.params?._meta,sendNotification:async l=>{let d={relatedRequestId:t.id};s&&(d.relatedTask={taskId:s}),await this.notification(l,d)},sendRequest:async(l,d,f)=>{let m={...f,relatedRequestId:t.id};s&&!m.relatedTask&&(m.relatedTask={taskId:s});let g=m.relatedTask?.taskId??s;return g&&c&&await c.updateTaskStatus(g,"input_required"),await this.request(l,d,m)},authInfo:r?.authInfo,requestId:t.id,requestInfo:r?.requestInfo,taskId:s,taskStore:c,taskRequestedTtl:a?.ttl,closeSSEStream:r?.closeSSEStream,closeStandaloneSSEStream:r?.closeStandaloneSSEStream};Promise.resolve().then(()=>{a&&this.assertTaskHandlerCapability(t.method)}).then(()=>o(t,u)).then(async l=>{if(i.signal.aborted)return;let d={result:l,jsonrpc:"2.0",id:t.id};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"response",message:d,timestamp:Date.now()},n?.sessionId):await n?.send(d)},async l=>{if(i.signal.aborted)return;let d={jsonrpc:"2.0",id:t.id,error:{code:Number.isSafeInteger(l.code)?l.code:C.InternalError,message:l.message??"Internal error",...l.data!==void 0&&{data:l.data}}};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"error",message:d,timestamp:Date.now()},n?.sessionId):await n?.send(d)}).catch(l=>this._onerror(new Error(`Failed to send response: ${l}`))).finally(()=>{this._requestHandlerAbortControllers.delete(t.id)})}_onprogress(t){let{progressToken:r,...o}=t.params,n=Number(r),s=this._progressHandlers.get(n);if(!s){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(t)}`));return}let i=this._responseHandlers.get(n),a=this._timeoutInfo.get(n);if(a&&i&&a.resetTimeoutOnProgress)try{this._resetTimeout(n)}catch(c){this._responseHandlers.delete(n),this._progressHandlers.delete(n),this._cleanupTimeout(n),i(c);return}s(o)}_onresponse(t){let r=Number(t.id),o=this._requestResolvers.get(r);if(o){if(this._requestResolvers.delete(r),ur(t))o(t);else{let i=new R(t.error.code,t.error.message,t.error.data);o(i)}return}let n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(t)}`));return}this._responseHandlers.delete(r),this._cleanupTimeout(r);let s=!1;if(ur(t)&&t.result&&typeof t.result=="object"){let i=t.result;if(i.task&&typeof i.task=="object"){let a=i.task;typeof a.taskId=="string"&&(s=!0,this._taskProgressTokens.set(a.taskId,r))}}if(s||this._progressHandlers.delete(r),ur(t))n(t);else{let i=R.fromError(t.error.code,t.error.message,t.error.data);n(i)}}get transport(){return this._transport}async close(){await this._transport?.close()}async*requestStream(t,r,o){let{task:n}=o??{};if(!n){try{yield{type:"result",result:await this.request(t,r,o)}}catch(i){yield{type:"error",error:i instanceof R?i:new R(C.InternalError,String(i))}}return}let s;try{let i=await this.request(t,It,o);if(i.task)s=i.task.taskId,yield{type:"taskCreated",task:i.task};else throw new R(C.InternalError,"Task creation did not return a task");for(;;){let a=await this.getTask({taskId:s},o);if(yield{type:"taskStatus",task:a},rt(a.status)){a.status==="completed"?yield{type:"result",result:await this.getTaskResult({taskId:s},r,o)}:a.status==="failed"?yield{type:"error",error:new R(C.InternalError,`Task ${s} failed`)}:a.status==="cancelled"&&(yield{type:"error",error:new R(C.InternalError,`Task ${s} was cancelled`)});return}if(a.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:s},r,o)};return}let c=a.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(u=>setTimeout(u,c)),o?.signal?.throwIfAborted()}}catch(i){yield{type:"error",error:i instanceof R?i:new R(C.InternalError,String(i))}}}request(t,r,o){let{relatedRequestId:n,resumptionToken:s,onresumptiontoken:i,task:a,relatedTask:c}=o??{};return new Promise((u,l)=>{let d=z=>{l(z)};if(!this._transport){d(new Error("Not connected"));return}if(this._options?.enforceStrictCapabilities===!0)try{this.assertCapabilityForMethod(t.method),a&&this.assertTaskCapability(t.method)}catch(z){d(z);return}o?.signal?.throwIfAborted();let f=this._requestMessageId++,m={...t,jsonrpc:"2.0",id:f};o?.onprogress&&(this._progressHandlers.set(f,o.onprogress),m.params={...t.params,_meta:{...t.params?._meta||{},progressToken:f}}),a&&(m.params={...m.params,task:a}),c&&(m.params={...m.params,_meta:{...m.params?._meta||{},[tt]:c}});let g=z=>{this._responseHandlers.delete(f),this._progressHandlers.delete(f),this._cleanupTimeout(f),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:f,reason:String(z)}},{relatedRequestId:n,resumptionToken:s,onresumptiontoken:i}).catch(S=>this._onerror(new Error(`Failed to send cancellation: ${S}`)));let $=z instanceof R?z:new R(C.RequestTimeout,String(z));l($)};this._responseHandlers.set(f,z=>{if(!o?.signal?.aborted){if(z instanceof Error)return l(z);try{let $=et(r,z.result);$.success?u($.data):l($.error)}catch($){l($)}}}),o?.signal?.addEventListener("abort",()=>{g(o?.signal?.reason)});let _=o?.timeout??Qg,y=()=>g(R.fromError(C.RequestTimeout,"Request timed out",{timeout:_}));this._setupTimeout(f,_,o?.maxTotalTimeout,y,o?.resetTimeoutOnProgress??!1);let v=c?.taskId;if(v){let z=$=>{let S=this._responseHandlers.get(f);S?S($):this._onerror(new Error(`Response handler missing for side-channeled request ${f}`))};this._requestResolvers.set(f,z),this._enqueueTaskMessage(v,{type:"request",message:m,timestamp:Date.now()}).catch($=>{this._cleanupTimeout(f),l($)})}else this._transport.send(m,{relatedRequestId:n,resumptionToken:s,onresumptiontoken:i}).catch(z=>{this._cleanupTimeout(f),l(z)})})}async getTask(t,r){return this.request({method:"tasks/get",params:t},$o,r)}async getTaskResult(t,r,o){return this.request({method:"tasks/result",params:t},r,o)}async listTasks(t,r){return this.request({method:"tasks/list",params:t},xo,r)}async cancelTask(t,r){return this.request({method:"tasks/cancel",params:t},Dl,r)}async notification(t,r){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(t.method);let o=r?.relatedTask?.taskId;if(o){let a={...t,jsonrpc:"2.0",params:{...t.params,_meta:{...t.params?._meta||{},[tt]:r.relatedTask}}};await this._enqueueTaskMessage(o,{type:"notification",message:a,timestamp:Date.now()});return}if((this._options?.debouncedNotificationMethods??[]).includes(t.method)&&!t.params&&!r?.relatedRequestId&&!r?.relatedTask){if(this._pendingDebouncedNotifications.has(t.method))return;this._pendingDebouncedNotifications.add(t.method),Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(t.method),!this._transport)return;let a={...t,jsonrpc:"2.0"};r?.relatedTask&&(a={...a,params:{...a.params,_meta:{...a.params?._meta||{},[tt]:r.relatedTask}}}),this._transport?.send(a,r).catch(c=>this._onerror(c))});return}let i={...t,jsonrpc:"2.0"};r?.relatedTask&&(i={...i,params:{...i.params,_meta:{...i.params?._meta||{},[tt]:r.relatedTask}}}),await this._transport.send(i,r)}setRequestHandler(t,r){let o=Ps(t);this.assertRequestHandlerCapability(o),this._requestHandlers.set(o,(n,s)=>{let i=Es(t,n);return Promise.resolve(r(i,s))})}removeRequestHandler(t){this._requestHandlers.delete(t)}assertCanSetRequestHandler(t){if(this._requestHandlers.has(t))throw new Error(`A request handler for ${t} already exists, which would be overridden`)}setNotificationHandler(t,r){let o=Ps(t);this._notificationHandlers.set(o,n=>{let s=Es(t,n);return Promise.resolve(r(s))})}removeNotificationHandler(t){this._notificationHandlers.delete(t)}_cleanupTaskProgressHandler(t){let r=this._taskProgressTokens.get(t);r!==void 0&&(this._progressHandlers.delete(r),this._taskProgressTokens.delete(t))}async _enqueueTaskMessage(t,r,o){if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let n=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(t,r,o,n)}async _clearTaskQueue(t,r){if(this._taskMessageQueue){let o=await this._taskMessageQueue.dequeueAll(t,r);for(let n of o)if(n.type==="request"&&ds(n.message)){let s=n.message.id,i=this._requestResolvers.get(s);i?(i(new R(C.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(s)):this._onerror(new Error(`Resolver missing for request ${s} during task ${t} cleanup`))}}}async _waitForTaskUpdate(t,r){let o=this._options?.defaultTaskPollInterval??1e3;try{let n=await this._taskStore?.getTask(t);n?.pollInterval&&(o=n.pollInterval)}catch{}return new Promise((n,s)=>{if(r.aborted){s(new R(C.InvalidRequest,"Request cancelled"));return}let i=setTimeout(n,o);r.addEventListener("abort",()=>{clearTimeout(i),s(new R(C.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(t,r){let o=this._taskStore;if(!o)throw new Error("No task store configured");return{createTask:async n=>{if(!t)throw new Error("No request provided");return await o.createTask(n,t.id,{method:t.method,params:t.params},r)},getTask:async n=>{let s=await o.getTask(n,r);if(!s)throw new R(C.InvalidParams,"Failed to retrieve task: Task not found");return s},storeTaskResult:async(n,s,i)=>{await o.storeTaskResult(n,s,i,r);let a=await o.getTask(n,r);if(a){let c=mr.parse({method:"notifications/tasks/status",params:a});await this.notification(c),rt(a.status)&&this._cleanupTaskProgressHandler(n)}},getTaskResult:n=>o.getTaskResult(n,r),updateTaskStatus:async(n,s,i)=>{let a=await o.getTask(n,r);if(!a)throw new R(C.InvalidParams,`Task "${n}" not found - it may have been cleaned up`);if(rt(a.status))throw new R(C.InvalidParams,`Cannot update task "${n}" from terminal status "${a.status}" to "${s}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await o.updateTaskStatus(n,s,i,r);let c=await o.getTask(n,r);if(c){let u=mr.parse({method:"notifications/tasks/status",params:c});await this.notification(u),rt(c.status)&&this._cleanupTaskProgressHandler(n)}},listTasks:n=>o.listTasks(n,r)}}};function Hl(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Kl(e,t){let r={...e};for(let o in t){let n=o,s=t[n];if(s===void 0)continue;let i=r[n];Hl(i)&&Hl(s)?r[n]={...i,...s}:r[n]=s}return r}var Of=ka(fa(),1),jf=ka(Nf(),1);function Ub(){let e=new Of.default({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return(0,jf.default)(e),e}var dn=class{constructor(t){this._ajv=t??Ub()}getValidator(t){let r="$id"in t&&typeof t.$id=="string"?this._ajv.getSchema(t.$id)??this._ajv.compile(t):this._ajv.compile(t);return o=>r(o)?{valid:!0,data:o,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(r.errors)}}};var pn=class{constructor(t){this._server=t}requestStream(t,r,o){return this._server.requestStream(t,r,o)}async getTask(t,r){return this._server.getTask({taskId:t},r)}async getTaskResult(t,r,o){return this._server.getTaskResult({taskId:t},r,o)}async listTasks(t,r){return this._server.listTasks(t?{cursor:t}:void 0,r)}async cancelTask(t,r){return this._server.cancelTask({taskId:t},r)}};function Zf(e,t,r){if(!e)throw new Error(`${r} does not support task creation (required for ${t})`);switch(t){case"tools/call":if(!e.tools?.call)throw new Error(`${r} does not support task creation for tools/call (required for ${t})`);break;default:break}}function Cf(e,t,r){if(!e)throw new Error(`${r} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(!e.sampling?.createMessage)throw new Error(`${r} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(!e.elicitation?.create)throw new Error(`${r} does not support task creation for elicitation/create (required for ${t})`);break;default:break}}var fn=class extends Po{constructor(t,r){super(r),this._serverInfo=t,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(_r.options.map((o,n)=>[o,n])),this.isMessageIgnored=(o,n)=>{let s=this._loggingLevels.get(n);return s?this.LOG_LEVEL_SEVERITY.get(o)<this.LOG_LEVEL_SEVERITY.get(s):!1},this._capabilities=r?.capabilities??{},this._instructions=r?.instructions,this._jsonSchemaValidator=r?.jsonSchemaValidator??new dn,this.setRequestHandler(ms,o=>this._oninitialize(o)),this.setNotificationHandler(hs,()=>this.oninitialized?.()),this._capabilities.logging&&this.setRequestHandler(xs,async(o,n)=>{let s=n.sessionId||n.requestInfo?.headers["mcp-session-id"]||void 0,{level:i}=o.params,a=_r.safeParse(i);return a.success&&this._loggingLevels.set(s,a.data),{}})}get experimental(){return this._experimental||(this._experimental={tasks:new pn(this)}),this._experimental}registerCapabilities(t){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Kl(this._capabilities,t)}setRequestHandler(t,r){let n=co(t)?.method;if(!n)throw new Error("Schema is missing a method literal");let s;if(Et(n)){let a=n;s=a._zod?.def?.value??a.value}else{let a=n;s=a._def?.value??a.value}if(typeof s!="string")throw new Error("Schema method literal must be a string");if(s==="tools/call"){let a=async(c,u)=>{let l=et(gr,c);if(!l.success){let g=l.error instanceof Error?l.error.message:String(l.error);throw new R(C.InvalidParams,`Invalid tools/call request: ${g}`)}let{params:d}=l.data,f=await Promise.resolve(r(c,u));if(d.task){let g=et(It,f);if(!g.success){let _=g.error instanceof Error?g.error.message:String(g.error);throw new R(C.InvalidParams,`Invalid task creation result: ${_}`)}return g.data}let m=et(ko,f);if(!m.success){let g=m.error instanceof Error?m.error.message:String(m.error);throw new R(C.InvalidParams,`Invalid tools/call result: ${g}`)}return m.data};return super.setRequestHandler(t,a)}return super.setRequestHandler(t,r)}assertCapabilityForMethod(t){switch(t){case"sampling/createMessage":if(!this._clientCapabilities?.sampling)throw new Error(`Client does not support sampling (required for ${t})`);break;case"elicitation/create":if(!this._clientCapabilities?.elicitation)throw new Error(`Client does not support elicitation (required for ${t})`);break;case"roots/list":if(!this._clientCapabilities?.roots)throw new Error(`Client does not support listing roots (required for ${t})`);break;case"ping":break}}assertNotificationCapability(t){switch(t){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${t})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${t})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${t})`);break;case"notifications/elicitation/complete":if(!this._clientCapabilities?.elicitation?.url)throw new Error(`Client does not support URL elicitation (required for ${t})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(t){if(this._capabilities)switch(t){case"completion/complete":if(!this._capabilities.completions)throw new Error(`Server does not support completions (required for ${t})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${t})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${t})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${t})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${t})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Server does not support tasks capability (required for ${t})`);break;case"ping":case"initialize":break}}assertTaskCapability(t){Cf(this._clientCapabilities?.tasks?.requests,t,"Client")}assertTaskHandlerCapability(t){this._capabilities&&Zf(this._capabilities.tasks?.requests,t,"Server")}async _oninitialize(t){let r=t.params.protocolVersion;return this._clientCapabilities=t.params.capabilities,this._clientVersion=t.params.clientInfo,{protocolVersion:Tl.includes(r)?r:us,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},ho)}async createMessage(t,r){if((t.tools||t.toolChoice)&&!this._clientCapabilities?.sampling?.tools)throw new Error("Client does not support sampling tools capability.");if(t.messages.length>0){let o=t.messages[t.messages.length-1],n=Array.isArray(o.content)?o.content:[o.content],s=n.some(u=>u.type==="tool_result"),i=t.messages.length>1?t.messages[t.messages.length-2]:void 0,a=i?Array.isArray(i.content)?i.content:[i.content]:[],c=a.some(u=>u.type==="tool_use");if(s){if(n.some(u=>u.type!=="tool_result"))throw new Error("The last message must contain only tool_result content if any is present");if(!c)throw new Error("tool_result blocks are not matching any tool_use from the previous message")}if(c){let u=new Set(a.filter(d=>d.type==="tool_use").map(d=>d.id)),l=new Set(n.filter(d=>d.type==="tool_result").map(d=>d.toolUseId));if(u.size!==l.size||![...u].every(d=>l.has(d)))throw new Error("ids of tool_result blocks and tool_use blocks from previous message do not match")}}return t.tools?this.request({method:"sampling/createMessage",params:t},ks,r):this.request({method:"sampling/createMessage",params:t},ws,r)}async elicitInput(t,r){switch(t.mode??"form"){case"url":{if(!this._clientCapabilities?.elicitation?.url)throw new Error("Client does not support url elicitation.");let n=t;return this.request({method:"elicitation/create",params:n},So,r)}case"form":{if(!this._clientCapabilities?.elicitation?.form)throw new Error("Client does not support form elicitation.");let n=t.mode==="form"?t:{...t,mode:"form"},s=await this.request({method:"elicitation/create",params:n},So,r);if(s.action==="accept"&&s.content&&n.requestedSchema)try{let a=this._jsonSchemaValidator.getValidator(n.requestedSchema)(s.content);if(!a.valid)throw new R(C.InvalidParams,`Elicitation response content does not match requested schema: ${a.errorMessage}`)}catch(i){throw i instanceof R?i:new R(C.InternalError,`Error validating elicitation response: ${i instanceof Error?i.message:String(i)}`)}return s}}}createElicitationCompletionNotifier(t,r){if(!this._clientCapabilities?.elicitation?.url)throw new Error("Client does not support URL elicitation (required for notifications/elicitation/complete)");return()=>this.notification({method:"notifications/elicitation/complete",params:{elicitationId:t}},r)}async listRoots(t,r){return this.request({method:"roots/list",params:t},Ss,r)}async sendLoggingMessage(t,r){if(this._capabilities.logging&&!this.isMessageIgnored(t.level,r))return this.notification({method:"notifications/message",params:t})}async sendResourceUpdated(t){return this.notification({method:"notifications/resources/updated",params:t})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};import qf from"node:process";var mn=class{append(t){this._buffer=this._buffer?Buffer.concat([this._buffer,t]):t}readMessage(){if(!this._buffer)return null;let t=this._buffer.indexOf(`
`);if(t===-1)return null;let r=this._buffer.toString("utf8",0,t).replace(/\r$/,"");return this._buffer=this._buffer.subarray(t+1),Fb(r)}clear(){this._buffer=void 0}};function Fb(e){return Al.parse(JSON.parse(e))}function Af(e){return JSON.stringify(e)+`
`}var hn=class{constructor(t=qf.stdin,r=qf.stdout){this._stdin=t,this._stdout=r,this._readBuffer=new mn,this._started=!1,this._ondata=o=>{this._readBuffer.append(o),this.processReadBuffer()},this._onerror=o=>{this.onerror?.(o)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(;;)try{let t=this._readBuffer.readMessage();if(t===null)break;this.onmessage?.(t)}catch(t){this.onerror?.(t)}}async close(){this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),this.onclose?.()}send(t){return new Promise(r=>{let o=Af(t);this._stdout.write(o)?r():this._stdout.once("drain",r)})}};import{randomUUID as Vb}from"node:crypto";var ba=new fn({name:"robinMCP",version:"1.0.0"},{capabilities:{tools:{}}});ba.setRequestHandler(zs,async()=>({tools:[{name:"tell_story",description:"Returns a story value",inputSchema:{type:"object",properties:{},required:[]}}]}));ba.setRequestHandler(gr,async e=>{if(e.params.name==="tell_story")try{let t=Vb();return{content:[{type:"text",text:JSON.stringify({story:t},null,2)}]}}catch(t){return{content:[{type:"text",text:JSON.stringify({error:"Failed to retrieve story",message:t instanceof Error?t.message:String(t)},null,2)}],isError:!0}}throw new Error(`Unknown tool: ${e.params.name}`)});async function Hb(){let e=new hn;await ba.connect(e)}Hb().catch(e=>{console.error("Server error:",e),process.exit(1)});
